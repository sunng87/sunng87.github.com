<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>Here Comes the Sun - misc</title>
        <link rel="stylesheet" href="../theme/css/main.css" />
        <link href="https://sunng.info/blog/atom.xml" type="application/atom+xml" rel="alternate" title="Here Comes the Sun Atom Feed" />

        <!--[if IE]>
            <script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="../">Here Comes the Sun </a></h1>
                <nav><ul>
                    <li class="active"><a href="../category/misc.html">misc</a></li>
                </ul></nav>
        </header><!-- /#banner -->

                <section id="content" class="body">
                    <ol id="posts-list" class="hfeed" start="4">
            <li><article class="hentry">
                <header>
                    <h1><a href="../jing-zhang-tie-lu.html" rel="bookmark"
                           title="Permalink to 京张铁路">京张铁路</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2012-08-19T00:00:00+08:00">
                Published: Sun 19 August 2012
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="../author/ning-sun.html">Ning Sun</a>
        </address>
<p>In <a href="../category/misc.html">misc</a>.</p>

</footer><!-- /.post-info -->                <ul>
<li>当时
tags:</li>
<li>Beijing</li>
<li>Railway
published: true
comments: true</li>
</ul>
<hr />
<p><p>这两周体验了一下北京周边的铁路。上周从北京西到张家口，这周从北京北到延庆。</p></p>
<p>用倒叙的方式说，我们常说的京张铁路是詹天佑修的那条百年历史的路线。这条路从现在的眼光看，南起西直门的北京北站，经过八达岭，康庄跨过官厅水库到河北沙城，进而宣化，张家口。不过这个路线现在已经少有车走了（查到一条L295次，但不确定具体路线）。从北京北开到延庆的S2动车是现在这条路线上主角。这是一趟郊区线，准确地说是旅游列车，为了解决从北京市区到八达岭交通压力大的问题。所有的车厢一律是动车一等座，从北京北到八达岭只要5元，可以说是物美价廉。一直到八达岭之前，路线都是老的京张铁路，在青龙桥依然还有著名的”人字形“铁路。作为旅游列车的话还真是个保留节目。</p>

<p>这次车在康庄附近离开京张线，进入康延线，一直开到延庆站，铁路就到了尽头。目前延庆车站也只有往返这个区间的S2线。另外据说延庆还有一个火车北站，是大秦线的一座货运车站，没有客运业务。</p>

<p>再说上周去张家口。现在北京去张家口的主要列车都从丰沙线走，经过丰台，石景山南，三家店进入京西的山区，最后在沙城和老的京张铁路汇合。在车上听人介绍 ...</p>
                <a class="readmore" href="../jing-zhang-tie-lu.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="../top-github-users-in-china.html" rel="bookmark"
                           title="Permalink to Top Github users in China">Top Github users in China</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2012-07-19T00:00:00+08:00">
                Published: Thu 19 July 2012
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="../author/ning-sun.html">Ning Sun</a>
        </address>
<p>In <a href="../category/misc.html">misc</a>.</p>

</footer><!-- /.post-info -->                <ul>
<li>把戏
tags:</li>
<li>github
published: true
comments: true</li>
</ul>
<hr />
<p><p>有感于<a href="http://sofish.de/file/demo/github/" target="_blank">这个版本</a>的github中国用户排名，我觉得单纯根据用户的followers数量不能完全说明问题。因此，需要改进一下排名的分数，加入项目Watchers的数量，这样可以让优质项目多的用户排名到前面。</p></p>
<p>这个策略是：followers + 1.5 * watchers + 2 * forks</p>

<p>得到的排名如下：
<script src="https://gist.github.com/3141146.js?file=results"></script></p>

<p>另外，这前100名用户里，语言使用的情况如下：<br />
'JavaScript': 80<br />
'Ruby': 52<br />
'Python': 46<br />
'C': 34<br />
'C++': 30<br />
'Java': 28<br />
'VimL': 28<br />
'Shell': 24<br />
'Objective-C': 24<br />
'PHP': 21<br />
'CoffeeScript': 13<br />
'Perl': 10 ...</p>
                <a class="readmore" href="../top-github-users-in-china.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="../geng-xin-liao-stages.html" rel="bookmark"
                           title="Permalink to 更新了stages">更新了stages</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2012-07-13T00:00:00+08:00">
                Published: Fri 13 July 2012
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="../author/ning-sun.html">Ning Sun</a>
        </address>
<p>In <a href="../category/misc.html">misc</a>.</p>

</footer><!-- /.post-info -->                <ul>
<li>手艺
tags:</li>
<li>github</li>
<li>java
published: true
comments: true</li>
</ul>
<hr />
<p><p><a href="https://github.com/sunng87/stages">Stages</a>原先是业余时间开发的一个简单的框架，用来实现SEDA。不过现在这个库经过同事们的加强，已经用在了美味和zeen的生产环境。最近我也对开源的这个分支做了一些修改。</p></p>
<p>首先是使用更安全的线程池，现在必须指定任务积压后的策略，即RejectionHandler。用户也可以设置自己的Queue，并且指定允许的大小。这是之前应该要做但是一直没做的事情。</p>

<p>其次在Task上增加了一个priority属性，如果你使用的是PriorityBlockingQueue，那么任务会根据这个优先级排序。但是由于PriorityBlockingQueue是unbounded，所以请慎用这个功能。</p>

<p>另外，现在所有的Task都通过perf4j计时，你可以用过配置log4j打印出性能报表日志。也可以通过JMX将耗时情况发布出去，我们在生产环境里通过ganglia监控了这些数据，还是比较有参考价值的。</p>

<p>最后，现在jmx监控stage积压队列的功能终于实现了。我会把每个队列的pending tasks数量通过mbean暴露出来，同样可以配置监控这个数据。有了这个数据后，我们可以很明确地了解各个stage的压力情况，调整线程池的策略。</p>

<p><img src="http://i.imgur.com/ashLh.png" alt="" /></p>

<p></p>
                <a class="readmore" href="../geng-xin-liao-stages.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="../timing-brings-perf4j-to-clojure.html" rel="bookmark"
                           title="Permalink to Timing brings perf4j to clojure">Timing brings perf4j to clojure</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2012-07-02T00:00:00+08:00">
                Published: Mon 02 July 2012
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="../author/ning-sun.html">Ning Sun</a>
        </address>
<p>In <a href="../category/misc.html">misc</a>.</p>

</footer><!-- /.post-info -->                <ul>
<li>ANN
tags:</li>
<li>clojure</li>
<li>github</li>
<li>java
published: true
comments: true</li>
</ul>
<hr />
<p><p><a href="https://github.com/sunng87/timing" target="_blank">Timing</a> is a dead simple clojure library wraps perf4j, while perf4j is an advanced library to log call time. It's like log4j to System.out.println, that to System.currentTimeMillies. </p></p>
<p>The core part of Timing library is a `timed` macro ...</p>
                <a class="readmore" href="../timing-brings-perf4j-to-clojure.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="../deng-pyshan.html" rel="bookmark"
                           title="Permalink to 登Py山">登Py山</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2012-06-17T00:00:00+08:00">
                Published: Sun 17 June 2012
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="../author/ning-sun.html">Ning Sun</a>
        </address>
<p>In <a href="../category/misc.html">misc</a>.</p>

</footer><!-- /.post-info -->                <ul>
<li>当时
tags:</li>
<li>Beijing</li>
<li>outdoor
published: true
comments: true</li>
</ul>
<hr />
<p><p>我的个天总算是有可写的东西了。</p></p>
<p>这次来北京有个重要的主题叫做锻炼身体，为此不惜代价抓住有效的机会来参加这些活动。昨天跑去爬了昌平十三陵水库旁边的蟒山。这个蟒山的，我就叫他python山。据说是本地爬山的入门路线之一。这次活动正好副领队又是三年多没见过的老同学，于是就毫不犹豫地参加了。爬山前的周四是上线的日子，晚上折腾到两点多，第二天又早早去上班。我要说的是周六显然不在最佳状态。</p>

<p>上次有这样的活动还是07年去庐山，那次就几乎中暑倒在山谷里了，为了避免悲剧发生这次背了3升水上山。这山是前半段比较陡，后半段稍微好一些。还是和上次庐山一样，跟着体力好走得快的人，很快就把力气用完了，坐在路边上一歇就是十五分钟，眼看着从队伍前头落到了队尾。然后也没有然后了，登顶的时候确实是在队尾。一开始还有心思照照相，后来赶紧把相机收起来，你不知道那个相机在肚子上一弹一弹的多耗费体力。</p>

<p>登顶之后吃过午饭感觉就好多了，下到天池看了一样大水库，然后再从景区的台阶返回。据说下山的路是1299级台阶。还是一样，刚出发的时候还在前面，走着走着就看见收队的同学了。下台阶下得两腿发颤，最累的时候感觉随时都可能腿一软就坐下了，幸好这种情况没有发生。</p>

<p>这次爬山最有成就感的，除了没有掉队以外，就是没出什么洋相。比庐山下山时坐倒n次要强多了 ...</p>
                <a class="readmore" href="../deng-pyshan.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>
                </ol><!-- /#posts-list -->
<p class="paginator">
        <a href="../category/misc7.html">&laquo;</a>
    Page 8 / 77
        <a href="../category/misc9.html">&raquo;</a>
</p>
                </section><!-- /#content -->
        <section id="extras" class="body">
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="https://sunng.info/blog/atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                            <li><a href="https://github.com/sunng87">Github</a></li>
                            <li><a href="https://twitter.com/sunng">Twitter</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>