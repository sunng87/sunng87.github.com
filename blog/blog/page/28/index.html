
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>车水马龙</title>
  <meta name="author" content="Sun Ning">

  
  <meta name="description" content=" 长期苦于桌上没有照明设备，上周末买了一盏灯。之所以选择Esc版的，因为咱是VI用户。
">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://sunng87.github.io/blog//blog/page/28">
  <link href="/blog/favicon.png" rel="icon">
  <link href="/blog/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="车水马龙" type="application/atom+xml">
  <script src="/blog/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/blog/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/blog/">车水马龙</a></h1>
  
    <h2>here comes the sun</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:sunng87.github.io/blog/" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/blog/">Blog</a></li>
  <li><a href="/blog/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2009/12/30/%E6%88%91%E6%98%AF%E4%B8%80%E7%9B%8F%E5%B0%8F%E7%81%AF/">我是一盏小灯</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-12-30T00:00:00+08:00" pubdate data-updated="true">Dec 30<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img class="alignnone" src="http://farm5.static.flickr.com/4053/4228168348_1ff34e05e0.jpg" alt="" width="500" height="335" /></p>

<p>长期苦于桌上没有照明设备，上周末买了一盏灯。之所以选择Esc版的，因为咱是VI用户。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2009/12/30/setting-environment-variables-for-netbeans-continued/">Setting Environment Variables for NetBeans, Continued</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-12-30T00:00:00+08:00" pubdate data-updated="true">Dec 30<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>This is a feature introduced in NetBeans 6.7.</p>

<p><img class="alignnone" src="http://farm5.static.flickr.com/4072/4227520447_bccc557571.jpg" alt="" width="500" height="287" /></p>

<p>Set environment variables for specified life-cycle phases: Open project properties dialog, select action category. Select actions which depend on the variable, click add button to add such an environment variable.</p>

<p>However, this method doesn&#8217;t work with Glassfish spawned the IDE. If you want use environment variables in the server spawned by NetBeans IDE, you still have to export the variables in netbeans.conf</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2009/12/29/setting-environment-variables-for-glassfish-v3/">Setting Environment Variables for Glassfish V3</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-12-29T00:00:00+08:00" pubdate data-updated="true">Dec 29<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>After you test and build your application in NetBeans, you deploy it to Glassfish, but the environment variables are invalid again. In such situation, you should set these variable in glassfish configuration file which is supposed to located at:</p>

<p><em>$GLASSFISH_HOME/glassfish/config/asenv.conf</em></p>

<p>Append your variables to the file, and restart the server. It works.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2009/12/28/setting-environment-variables-for-netbeans/">Setting Environment Variables for NetBeans</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-12-28T00:00:00+08:00" pubdate data-updated="true">Dec 28<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>If you use NetBeans IDE to build an application which reads environment variable, you will have to do these settings in your IDE. There is no GUI to set such variables in NetBeans while Eclipse provides you a &#8220;Run Configuration Dialog&#8221;. So just add the declaration in your netbeans.conf.</p>

<p>It is highly recommended to copy the configuration file to your home directory before you edit it.</p>

<p><em>cp -r /usr/local/netbeans-6.8/etc ~/.netbeans/6.8/</em></p>

<p>And append this line:</p>

<p><em>export YAN_RESOURCE=/home/sun/work/yan-resource</em></p>

<p>Then restart your IDE, it works. You can test/build/run your application with the environment variable <em>$YAN_RESOURCE</em> inside NetBeans IDE,</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2009/12/26/web-2-0-icon-captcha/">Web 2.0 Icon Captcha</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-12-26T00:00:00+08:00" pubdate data-updated="true">Dec 26<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Yan 新增了一种验证码类型，Web 2.0 图标验证码。用户根据图标的内容和提示的信息，提交验证码。验证码图片如下：</p>

<p><img class="alignnone" src="http://farm3.static.flickr.com/2556/4215434144_f589085acd_o.png" alt="" width="256" height="192" /></p>

<p>提示文字： Please figure out twitter icons.</p>

<p>用户输入Twitter图标左上角上的字母，即可进行验证。在Yan的测试界面上使用如图：</p>

<p><img class="alignnone" src="http://farm3.static.flickr.com/2565/4214663971_cdc2168f69_o.png" alt="" width="394" height="503" /></p>

<p>Web2.0 Icon实际上是Yan中新增的拼图验证码的一个实例，利用拼图验证码可以生成相似的更有创意的验证码。在我的开发环境中生成这样一张图片大约需要80ms。</p>

<p>项目中使用的图标均从互联网收集，遵循CC等协议或经作者授权，详情参考项目中README文件。</p>

<p>祝DAF同学生日快乐。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2009/12/26/hush/">Hush!</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-12-26T00:00:00+08:00" pubdate data-updated="true">Dec 26<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img class="alignnone" src="http://farm3.static.flickr.com/2577/4215800886_9e33ac4830_o.png" alt="" width="329" height="492" /></p>

<p>今天新增的拼图验证码的可配置性非常强，你只要替换资源文件，在配置文件中修改提问的模版，指定图片的大小、行数、列数，就可以创造一套全新的验证码。他的简单程度实在超出你的想象。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2009/12/25/load-test-on-yan/">Load Test on Yan</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-12-25T00:00:00+08:00" pubdate data-updated="true">Dec 25<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>给Yan的验证码图片服务做了压力测试。测试环境：
<ul>
	<li>Intel Xeon 3.00GHz 4核</li>
	<li>内存2G</li>
	<li>Red Hat Enterprise Linux AS release 4 (Nahant Update 7)</li>
	<li>Jetty 6 / JDK 6</li>
</ul>
Jetty采用默认配置 maxThreads 200。</p>

<p>测试工具：ab (Apache Bench)</p>

<p>分别用10/50/100/200/500/1000并发用户，每个用户请求100次进行测试。结果如下：</p>

<p><!--   		BODY,DIV,TABLE,THEAD,TBODY,TFOOT,TR,TH,TD,P { font-family:"宋体"; font-size:x-small } --></p>

<p><!--   		BODY,DIV,TABLE,THEAD,TBODY,TFOOT,TR,TH,TD,P { font-family:"宋体"; font-size:x-small } -->
<table border="0" cellspacing="0" frame="VOID" rules="NONE"><colgroup> <col width="161" /> <col width="159" /> <col width="167" /> <col width="169" /> <col width="160" /> <col width="145" /> <col width="136" /> </colgroup>
<tbody>
<tr>
<td align="LEFT"></td>
<td align="RIGHT"><span style="font-family: Arial;">10</span></td>
<td align="RIGHT"><span style="font-family: Arial;">50</span></td>
<td align="RIGHT"><span style="font-family: Arial;">100</span></td>
<td align="RIGHT"><span style="font-family: Arial;">200</span></td>
<td align="RIGHT"><span style="font-family: Arial;">500</span></td>
<td align="RIGHT"><span style="font-family: Arial;">1000</span></td>
</tr>
<tr>
<td align="LEFT"><span style="font-family: Arial;">Requests per second</span></td>
<td align="RIGHT"><span style="font-family: Arial;">487.11</span></td>
<td align="RIGHT"><span style="font-family: Arial;">472.09</span></td>
<td align="RIGHT"><span style="font-family: Arial;">442.74</span></td>
<td align="RIGHT"><span style="font-family: Arial;">421.63</span></td>
<td align="RIGHT"><span style="font-family: Arial;">408.11</span></td>
<td align="RIGHT"><span style="font-family: Arial;">326.12</span></td>
</tr>
<tr>
<td align="LEFT"><span style="font-family: Arial;">Time per request</span></td>
<td align="RIGHT"><span style="font-family: Arial;">2.05</span></td>
<td align="RIGHT"><span style="font-family: Arial;">2.12</span></td>
<td align="RIGHT"><span style="font-family: Arial;">2.26</span></td>
<td align="RIGHT"><span style="font-family: Arial;">2.37</span></td>
<td align="RIGHT"><span style="font-family: Arial;">2.45</span></td>
<td align="RIGHT"><span style="font-family: Arial;">3.07</span></td>
</tr>
<tr>
<td align="LEFT"><span style="font-family: Arial;">Transfer rate</span></td>
<td align="RIGHT"><span style="font-family: Arial;">987.91</span></td>
<td align="RIGHT"><span style="font-family: Arial;">955.54</span></td>
<td align="RIGHT"><span style="font-family: Arial;">896.85</span></td>
<td align="RIGHT"><span style="font-family: Arial;">854.31</span></td>
<td align="RIGHT"><span style="font-family: Arial;">826.25</span></td>
<td align="RIGHT"><span style="font-family: Arial;">660.45</span></td>
</tr>
</tbody>
</table>
﻿<img class="alignnone" src="http://farm3.static.flickr.com/2677/4212622846_f6023f9b40_o.png" alt="" width="358" height="334" /></p>

<p>目前对每个请求独立使用JDK的awt实时绘图，吞吐量可以达到400以上，如果稍稍优化一下Jetty的配置，性能还有一定的提升空间。这个结果还是不错的。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2009/12/24/java%E5%B5%8C%E5%85%A5%E5%BC%8F%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E9%80%9F%E5%BA%A6%E5%AF%B9%E6%AF%94/">Java嵌入式数据库的速度对比</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-12-24T00:00:00+08:00" pubdate data-updated="true">Dec 24<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Yan的APIKEY一直是用嵌入式的数据库存储的，最初使用的是hsqldb，最近又添加了H2和Derby的支持，基本上囊括了所有开源的Java嵌入式数据库。实现多了自然需要挑选、比较一下。</p>

<p>数据库特性的比较，H2的网站上有很好的Matrix，一目了然<br />
http://www.h2database.com/html/features.html#comparison</p>

<p>关于速度的比较，今天做了一个简单的测试。</p>

<p>分别从derby / H2 / hsqldb中取出10 、100、1000条数据，循环100000次，比较耗时，如下：</p>

<p><img class="alignnone" src="http://farm3.static.flickr.com/2665/4210754380_5cb4d7b0a8_o.png" alt="" width="376" height="394" /></p>

<p>三者的速度差距非常明显，hsqldb远快于其他两个。</p>

<p>而在10、100、1000条记录的索引上查询，并取出指定记录呢，同样是100000次，如下：</p>

<p><img class="alignnone" src="http://farm3.static.flickr.com/2716/4210754396_e52acc7e69_o.png" alt="" width="376" height="394" /></p>

<p>再索引上查询，速度受记录数量的影响非常微弱了。但是hsqldb还是远快于其他二者，有趣的是derby的速度要略微快于H2.</p>

<p>根据这样的结果，在Yan的应用中，hsqldb还是最理想的实现。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2009/12/24/be-with-you/">Be With You</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-12-24T00:00:00+08:00" pubdate data-updated="true">Dec 24<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>今天下班骑车到高斯路时，突然路边奔出一只小狗跟着我的自行车一起跑。小狗挺干净，出现在这种工业区人不多的路上倒是挺让人诧异。我开始放慢速度，让它跟着我不至于太辛苦。可是它还足够顽皮，一会跑在左边，一会在右边，好像是知道今天过节一样，欢实得很。不过我对路中间不时经过的汽车有所顾虑，有意得向路边靠，打算把它挤到路涯边，这样安全一些。</p>

<p>大约是嫌我速度太慢了，一会后面又上来一个骑自行车的人，小狗顿时起了劲，蹦达蹦达地追了上去。那速度大概是它向往的吧，我在后面看着，直到他们一前一后，过了马路，我从另一个方向回家了。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2009/12/23/%E9%82%A3%E5%B9%B4%E6%A6%95%E6%A0%91%E4%B8%8B/">那年榕树下</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-12-23T00:00:00+08:00" pubdate data-updated="true">Dec 23<span>rd</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>有的朋友看到这标题，肯定感叹，哎呀妈呀，这哥们也堕落了，开始写软文了。好吧，就算是软文吧，我决定东拉西扯地码一些字，不同于上周五的工作指标，这次完全是自觉自愿的。</p>

<p>榕树下，25号，重新上线。</p>

<p>我接触互联网稍微晚了一些，2002年冬天周五的一个下午（不出意外是2002年12月20号），家里终于接上了网线。我打开的第一个网站是搜狐，第二个是华军，第三个不记得了。那时已经听说了榕树下，途径大约是每季度一期的贝塔斯曼广告和天天都有的广播小说节目。</p>

<p>贝塔斯曼当时似乎和榕树下还是合作关系，后来收购了榕树下，这也是榕树的不幸。每一期的目录都会有热门的网络小说，那时还都是以榕树下的为主。我记得曾经买过陆幼青的书，红极一时的。</p>

<p>广播每晚十点左右多会有读小说的节目，安妮宝贝的文字常常是DJ们的偏好。到现在具体的内容早就不记得，但是暖暖的感觉还是值得常常温故。</p>

<p>这是我对互联网最初的认识，虽然我那时也不看网络小说，但在印象里，网络小说是互联网生活很重要的一部分。现在要是问我知名的作者我可能几乎都说不上来，但是看到今天网站上列出来那些名字，诸如李寻欢、安妮、宁财神、慕容雪村这样的，还是有一分陌生的熟悉。</p>

<p>有一天，daf同学说她看小说，我说我只知道榕树下。于是顺手搜到已经忘记了的网址，漫长的载入过程还是以一个空白的窗口告终。这些年这种场面也见得多了，没有什么大惊小怪的：大概是太久远了吧。</p>

<p>今天上午看路金波的博客，突然发现榕树下被收购的新闻，转而打开网站，看到了这个让人想流眼泪的<a href="http://www.rongshu.com" target="_blank">页面</a>和这个让人想擦眼泪的<a href="http://58.215.39.134/" target="_blank">留言板</a>。人们对于榕树下的情感，绝不是现在充斥着肾上腺素的起点之流可以相比的。我说这是我加入以来公司做得最好的一件事情，也希望从此榕树下对大家不再只是一些回忆而已。</p>

<p><blockquote><h3>那年榕树下</h3>
词:叶风  曲:马条  演唱:马条<br />
那年榕树下   我们肩头披着细碎阳光<br />
总会有个枝头  将青春安放<br />
那年榕树下  我们亲手种下快乐忧伤<br />
可以要风穿过发梢的那一种飞扬<br />
榕树下  那年萤火虫一样飞舞盘旋<br />
每道光的背后是怎样的世界<br />
榕树下  那年谁其实都在谁的身边<br />
闭上眼的云端 却是秋千<br />
&#8230;&#8230;</blockquote></p>

<p>那年榕树下   我们肩头披着细碎阳光<br />
总会有个枝头  将青春安放<br />
那年榕树下  我们亲手种下快乐忧伤<br />
可以要风穿过发梢的那一种飞扬<br />
榕树下  那年萤火虫一样飞舞盘旋<br />
每道光的背后是怎样的世界<br />
榕树下  那年谁其实都在谁的身边<br />
闭上眼的云端 却是秋千<br />
&#8230;&#8230;<br />
&#8230;&#8230;<br />
榕树下  那年萤火虫一样飞舞盘旋<br />
每道光的背后是怎样的世界<br />
榕树下  那年谁其实都在谁的身边<br />
闭上眼的云端 却是秋千<br />
&#8230;&#8230;<br />
也许只字片语   一个不经意的标点  都能送给曾经些许温暖<br />
&#8230;&#8230;<br />
&#8230;&#8230;</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/blog/page/29/">&larr; Older</a>
    
    <a href="/blog/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/blog/page/27/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/blog/2013/07/05/grunt-for-requirejs-projects/">Grunt for Requirejs Projects</a>
      </li>
    
      <li class="post">
        <a href="/blog/blog/2013/06/29/%E7%BB%99-raspberry-pi-%E6%B7%BB%E5%8A%A0%E4%B8%80%E4%B8%AA%E6%98%BE%E7%A4%BA-ip-%E7%9A%84%E6%B6%B2%E6%99%B6%E5%B1%8F/">给 Raspberry Pi 添加一个显示 IP 的液晶屏</a>
      </li>
    
      <li class="post">
        <a href="/blog/blog/2013/06/07/%E7%BA%B8%E4%B8%8A%E5%BE%97%E6%9D%A5%E7%BB%88%E8%A7%89%E6%B5%85/">纸上得来终觉浅</a>
      </li>
    
      <li class="post">
        <a href="/blog/blog/2013/04/24/checkout-ring-adapter-for-jetty-9/">Checkout Ring Adapter for Jetty 9</a>
      </li>
    
      <li class="post">
        <a href="/blog/blog/2013/04/12/ann-handlebars-clojure-api/">[ANN] Handlebars Clojure API</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/sunng87">@sunng87</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'sunng87',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/blog/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>On Delicious</h1>
  <div id="delicious"></div>
  <script type="text/javascript" src="http://feeds.delicious.com/v2/json/classicing?count=3&amp;sort=date&amp;callback=renderDeliciousLinks"></script>
  <p><a href="http://delicious.com/classicing">My Delicious Bookmarks &raquo;</a></p>
</section>




  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Sun Ning -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'sunng-blog';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
