<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Here Comes the Sun</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://sunng.info/blog/theme/css/main.css" />
    <link href="https://sunng.info/blog/atom.xml" type="application/atom+xml" rel="alternate" title="Here Comes the Sun Full Atom Feed" />
  </head>

  <body id="index" class="home">
    <div id="page">
      <header id="banner" class="body">
        <h1><a href="https://sunng.info/blog/">Here Comes the Sun <strong></strong></a></h1>
        <nav id="menu">
          <ul>
            <li><a href="https://sunng.info/">About</a></li>
            <li><a href="https://sunng.info/blog/atom.xml">Site Feed</a></li>
          </ul>
        </nav>
      </header><!-- /#banner -->

<section id="content">
<h2>Articles in the misc category</h2>

  <ol id="post-list">
    <li><article class="hentry">
      <header> <h2 class="entry-title"><a href="https://sunng.info/blog/yan-zheng-ma-fu-wu-recaptchahe-vidoop.html" rel="bookmark" title="Permalink to 验证码服务recaptcha和vidoop">验证码服务recaptcha和vidoop</a></h2> </header>
      <footer class="post-info">

        <abbr class="published" title="2009-10-13T00:00:00+08:00"> Tue 13 October 2009 </abbr>
      </footer><!-- /.post-info -->
      <div class="entry-content"> <ul>
<li>手艺
tags:</li>
<li>captcha</li>
<li>python</li>
<li>web
published: true
comments: true</li>
</ul>
<hr />
<p><p>某人已经发展到上班时间写blog了。</p></p>
<p>继续说验证码服务，找到两个比较典型的。<a href="http://recaptcha.net/" target="_blank">recaptcha</a>非常著名，是twitter和facebook使用的验证码服务（不知道现在的情况。。。），<a href="http://vidoop.com/" target="_blank">vidoop</a>提供了一种很有特点的验证码机制。</p>

<p>两个服务都提供了python的接口封装便于接入，通过api接口可以管中窥豹，大致了解这两个验证服务的机制。
<h3>recaptcha</h3>
下面是一段结合了web.py的简单调用
<pre class="brush:python">public_key = "******"
private_key = "********"
class Recaptcha(object):
    def GET(self):
        r = recaptcha.displayhtml(public_key)
        return render.recapt(r)</pre></p>

<p>    def POST(self):<br />
        params = web.input()<br />
        recaptcha_challenge_field, recaptcha_response_field = params.recaptcha_challenge_field ...</p> </div><!-- /.entry-content -->
    </article></li>
    <li><article class="hentry">
      <header> <h2 class="entry-title"><a href="https://sunng.info/blog/yan-zheng-ma-fu-wu-de-liang-chong-fang-shi.html" rel="bookmark" title="Permalink to 验证码服务的两种方式">验证码服务的两种方式</a></h2> </header>
      <footer class="post-info">

        <abbr class="published" title="2009-10-12T00:00:00+08:00"> Mon 12 October 2009 </abbr>
      </footer><!-- /.post-info -->
      <div class="entry-content"> <ul>
<li>手艺
tags:</li>
<li>captcha</li>
<li>project</li>
<li>web
published: true
comments: true</li>
</ul>
<hr />
<p><p><h3>方式1，应用服务器负责生成验证码字符，验证码服务器主要负责验证码图片生成。</h3>
<img class="alignnone" src="http://farm3.static.flickr.com/2624/4005000566_e100e098ef.jpg" alt="" width="500" height="310" />
<ol>
    <li>用户浏览器向应用服务器请求包含验证码的页面；</li>
    <li>应用服务器生成验证码字符，存储在session中；应用服务器发送相关图片参数（验证码字符、宽、高、复杂度、背景色等）到验证码服务器；</li>
    <li>验证码服务器返回图片地址到应用服务器；</li>
    <li>应用服务器将包含验证码地址的网页发送给用户浏览器；</li>
    <li>用户浏览器通过img的src方式向验证码服务器请求验证码图片；</li>
    <li>验证码服务器输出验证码图片流到用户浏览器；</li>
    <li>用户判读验证码图片，提交表单；</li>
    <li>应用服务器取出session中的验证码字符比对，返回结果。</li>
</ol>
这种方式的优点：
<ol>
    <li>较少的HTTP请求调用</li>
    <li> 替换原应用中独立的验证码功能相对容易</li>
    <li> 验证码服务器相对简单</li>
</ol>
<h3>方式2，验证码服务器承担验证功能，应用服务器在验证中仅起到传递作用。</h3>
<img class="alignnone" src="http://farm3.static.flickr.com/2464/4005000760_cc402da4c1.jpg" alt="" width="500" height="310" />
<ol>
    <li>用户浏览器向应用服务器请求包含验证码的页面；</li>
    <li>应用服务器发送相关图片参数（宽、高、复杂度、背景色等）到验证码服务器；</li>
    <li>验证码服务器返回图片地址、惟一的会话id到应用服务器；</li>
    <li>应用服务器将包含验证码地址的网页发送给用户浏览器；</li>
    <li>用户浏览器通过img的src方式向验证码服务器请求验证码图片；</li>
    <li>验证码服务器输出验证码图片流到用户浏览器；</li>
    <li>用户判读验证码图片 ...</li></ol></p></p> </div><!-- /.entry-content -->
    </article></li>
    <li><article class="hentry">
      <header> <h2 class="entry-title"><a href="https://sunng.info/blog/jie-shou-can-guan-huan-ying-liu-yan.html" rel="bookmark" title="Permalink to 接受参观，欢迎留言">接受参观，欢迎留言</a></h2> </header>
      <footer class="post-info">

        <abbr class="published" title="2009-10-10T00:00:00+08:00"> Sat 10 October 2009 </abbr>
      </footer><!-- /.post-info -->
      <div class="entry-content"> <ul>
<li>留影
tags:</li>
<li>clip</li>
<li>daf
published: true
comments: true</li>
</ul>
<hr />
<p><p><img class="alignnone" src="http://farm4.static.flickr.com/3448/3997603627_6b2ce9be05.jpg" alt="" width="500" height="333" /><!--more--></p></p>
<p><img class="alignnone" src="http://farm3.static.flickr.com/2569/3997603859_500a635a3f.jpg" alt="" width="500" height="357" /></p>

<p><img class="alignnone" src="http://farm3.static.flickr.com/2442/3998364828_72f5b4f4bc.jpg" alt="" width="500" height="208" />
<span style="color: #999999;">A: 对对对<br />
A: 有个那个什么的请求<br />
A: 我想被flatter<br />
A: 你把那三张图post到你blog<br />
A: 成不~<br />
B: 没问题<br />
B: 呵呵<br />
A: 好~<br />
B: 稍等～<br />
A: 更新好~<br />
A: 我来瞅瞅<br />
B: 很快就好<br />
B: 你去刷牙<br />
A: 然后豆瓣也share<br />
A: 然后继续接受flatter<br />
A: XDDDDDD<br />
B: 呵呵<br />
B: 行啊<br />
A: 哇哦<br />
A: 被flatter够了以后继续画 嗯</span></p> </div><!-- /.entry-content -->
    </article></li>
    <li><article class="hentry">
      <header> <h2 class="entry-title"><a href="https://sunng.info/blog/dou-ban-jia-gou-fa-zhan-pptzhuan.html" rel="bookmark" title="Permalink to 豆瓣架构发展PPT[转]">豆瓣架构发展PPT[转]</a></h2> </header>
      <footer class="post-info">

        <abbr class="published" title="2009-10-09T00:00:00+08:00"> Fri 09 October 2009 </abbr>
      </footer><!-- /.post-info -->
      <div class="entry-content"> <ul>
<li>他山
tags:</li>
<li>Architecture</li>
<li>Douban
published: true
comments: true</li>
</ul>
<hr />
<p><p>今天下午看到了这个豆瓣架构发展历程的PPT，是今年上半年QCon上的，看了以后感觉很有启发意义。随着用户量的增大，压力的增加，功能的扩展，豆瓣架构上做出相应的变化，从最初一台机器上跑lighttpd/mysql/Quixote/memcached到现在的DoubanFS存储，DoubanDB分布式Key-Value Store，加上多台mysql，多台appserver，专门的后台运算服务器等等。</p></p>
<p>PPT地址：
<a href="http://www.riawork.org/iarch/douban/douban_qcon2009_beijing.pdf" target="_blank">http://www.riawork.org/iarch/douban/douban_qcon2009_beijing.pdf</a></p>

<p>可惜因为字体的问题好像在Evince里很多中文字看不到，还得开一下虚拟机。</p> </div><!-- /.entry-content -->
    </article></li>
    <li><article class="hentry">
      <header> <h2 class="entry-title"><a href="https://sunng.info/blog/a-ba.html" rel="bookmark" title="Permalink to 阿巴">阿巴</a></h2> </header>
      <footer class="post-info">

        <abbr class="published" title="2009-10-08T00:00:00+08:00"> Thu 08 October 2009 </abbr>
      </footer><!-- /.post-info -->
      <div class="entry-content"> <ul>
<li>自话
tags:</li>
<li>Life
published: true
comments: true</li>
</ul>
<hr />
<p><p>早晨八点半下楼开自行车锁，突然听见背后有微弱的声音。回头一看是个老太太坐在轮椅上，眼睛直直地盯着我，嘴里含糊不清地发出阿巴阿巴的声音。我自然是听不懂她说什么了，继续开锁。十月份虽然还是阳光普照，但是风里已经有点肃穆的意思了。这样的天气，年纪大了的人独自在外面这么坐着，想起来还是很残酷的。我推车要走，老太太还是盯着我阿巴阿巴地喊。假日的早晨小区里空空荡荡，遇到这样的场面还真有点超出“奇怪”能表达的意思。我又不好意思头也不回就走，推着自行车走上前去，想问老太太点什么，但是好像又无从问起，最后大约问了些“您怎么在这里”，“您的家里人在哪”这类的问题。最终都没有形成对话，老太太还是自顾自颤颤巍巍地喊阿巴阿巴。这个时候旁边单元出来个中年妇女远远说了什么一句，我听不懂，只是听到“神经病”三个字。一看有亲戚在旁边，我想眼前这一切大约都还在别人的可控范围里，可以走了。</p></p>
<p>也不知道这个阿巴到底是什么意思，或者说于老人自己是什么意思。路上我故意想得戏剧性一些，难道是老太太的什么亲人，早年走失的儿子？当然了，很有可能只是一个老人丧失语言能力之后惟一能发出的声音而已。</p> </div><!-- /.entry-content -->
    </article></li>
  </ol><!-- /#posts-list -->
<p class="paginator">
        <a href="https://sunng.info/blog/category/misc65.html">&laquo;</a>
    Page 66 / 78
        <a href="https://sunng.info/blog/category/misc67.html">&raquo;</a>
</p>
</section><!-- /#content -->

      <footer id="contentinfo" class="body">
        <address id="about" class="vcard body">
          <p>Proudly powered by <a href="http://getpelican.com/">Pelican</a>,
            which takes great advantage of <a href="http://python.org">Python</a>. </p>
          <p>The theme is called <i>gotham</i>, created by myself on G17 Train Beijing-Nanjing, 2016 Apr 1st.</p>
        </address><!-- /#about -->
      </footer><!-- /#contentinfo -->
    </div>

  </body>
</html>