
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Here comes the Sun</title>
  <meta name="author" content="Sun Ning">

  
  <meta name="description" content="经过一周的重构和开发，我的开源项目，验证码服务，打上了0.3的tag，算是一个release吧。 This release has been focusing on support for different types captcha generators. Now Yan is not &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://sunng87.github.io/blog//blog/page/30">
  <link href="/blog/favicon.png" rel="icon">
  <link href="/blog/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/blog/atom.xml" rel="alternate" title="Here comes the Sun" type="application/atom+xml">
  <script src="/blog/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/blog/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/blog/">Here comes the Sun</a></h1>
  
    <h2>Sun Ning's web log</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/blog/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:sunng87.github.io/blog/" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/blog/">Blog</a></li>
  <li><a href="/blog/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2009/12/20/yan-0-3/">Yan 0.3</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-12-20T00:00:00+08:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>经过一周的重构和开发，我的开源项目，验证码服务，打上了0.3的tag，算是一个release吧。</p>

<p>This release has been focusing on support for different types captcha generators. Now Yan is not only able to provide image/jpeg captcha, but also text/plain and any others.
<h3>Changeset:</h3>
<ul>
	<li>Internal API Changes:
<ul>
	<li>Cache API improved: new CacheItemIdentity and CacheIdStrategy were introduced in to provide convertion between cache item name and captcha info model;</li>
	<li>Captcha Generator API improved: Add CaptchaGeneratorInfo to define some meta information on captcha providers (such as mode code, captcha type);</li>
	<li>Captcha Data Model(CaptchaInfo) and Ticket Data Model improved: configuration parameters are separated from required parameters and has been more generic for different types of generator algorisms;</li>
</ul>
</li>
	<li>External API Changes:
<ul>
	<li>Rename /image url to /captcha for better literal accuracy;</li>
	<li>/ticket now supports multiple types of applicable format (plain text / json / xml / yaml);</li>
	<li>/ticket now returns the mime type of the captcha generator;</li>
	<li>Add a Simple-Plain-Text generator as a sample for those whose mime type is other than image/jpeg;</li>
</ul>
</li>
	<li>Other changes:
<ul>
	<li>I created a new branch for next version of Yan. So the code in repository now has multiply branches, you can use &#8216;hg update branch-name&#8217; to switch between difference branches;</li>
	<li>The sample test page for the service (index.jsp) has been adopt to the new protocol and totally restyled.</li>
</ul>
</li>
</ul>
<img class="alignnone" src="http://farm3.static.flickr.com/2503/4200328968_b3dd1fee5f.jpg" alt="" width="500" height="391" /></p>

<p>Again, grab code from the development repository:
<em>hg clone https://sunng@bitbucket.org/sunng/yan/</em></p>

<p>If you don&#8217;t use mercurial/hg, you can also download the tagged version from the page:
<a href="http://bitbucket.org/sunng/yan/downloads/" target="_blank"><em>http://bitbucket.org/sunng/yan/downloads/</em></a></p>

<p>Just use maven to resolve dependency, build and run the project:
<em>mvn jetty:run</em></p>

<p>Feel free to report issue :)</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2009/12/09/a-button-by-gimp/">A Button by GIMP</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-12-09T00:00:00+08:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Inspired by a <a href="http://sixrevisions.com/tutorials/web-development-tutorials/create-an-animated-call-to-action-button/" target="_blank">&#8220;Call to action&#8221; tutorial of Photoshop</a>, I&#8217;d like to do the same thing with free and open source software, GIMP.</p>

<p>Before we start the journey, it&#8217;s better to get well prepared. Take a look at the powerful plugin &#8221;<a href="http://registry.gimp.org/node/186" target="_blank">Layer Effects</a>&#8221;. It provides you complete functionality as &#8220;Layer Style&#8221; in Photoshop does which is of critical importance in such kind of image manipulation. Follow the installation guide and I won&#8217;t spend many words about this step.</p>

<p>Open your gimp, create a new canvas with custom size (which makes you feel comfortable)</p>

<p>New a layer, use selection tool to create a rounded rectangle selection area.</p>

<p><img class="alignnone" src="http://farm3.static.flickr.com/2744/4171189572_a6c70c8b00.jpg" alt="" width="500" height="375" /></p>

<p>Fill the selection with gradient color.</p>

<p><img class="alignnone" src="http://farm3.static.flickr.com/2653/4170430801_ee9b8e973d.jpg" alt="" width="500" height="375" /></p>

<p>Resize the canvas. Glow the selection with 3px by menu command &#8220;selection-&gt;glow&#8221;. The crop the canvas by selection using &#8220;image-&gt;crop by selection&#8221;.</p>

<p>Then we apply some layer effects to beauty the button.
<ul>
	<li>layer effects: inner glow, white 75% opacity, size 5</li>
	<li>layer effects: stroke 1px</li>
</ul>
<img src="http://farm3.static.flickr.com/2592/4171189712_2b48af7d78.jpg" alt="" width="500" height="375" /></p>

<p>Place some text on the button such as &#8220;Sign Up&#8221;. Bold sans font(DejaVu sans or Helvetica bold) is recommended here.</p>

<p>Use gradient overlay effect on the text. As the layer effects plugin doesn&#8217;t support gradient overlay on text, we have to do it in a different way. First, create a new layer. Then convert text to selection with context menu command. Gradient fill the selection and hide the original text layer at last. Now we got:</p>

<p><img class="alignnone" src="http://farm3.static.flickr.com/2692/4170430973_8f65b08603.jpg" alt="" width="500" height="375" /></p>

<p>Don&#8217;t stop here. Add layer effects on the new layer:
<ul>
	<li>inner shadow, black, size 2px, distance 2px, angle 90</li>
	<li>drop shadow, light, size 2px, distance 2px, angle 90</li>
</ul>
<img class="alignnone" src="http://farm3.static.flickr.com/2579/4170431039_4eff9b67ff.jpg" alt="" width="500" height="375" /></p>

<p>You can tune the color schema by yourself along the process :)</p>

<p><img class="alignnone" src="http://farm3.static.flickr.com/2765/4171189918_f1ea2c2eff_o.png" alt="" width="170" height="71" /></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2009/12/06/tikhonov/">Tikhonov</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-12-06T00:00:00+08:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>2009年12月4日，苏联功勋演员吉洪诺夫去逝，享年81岁。</p>

<p><img class="alignnone" src="http://farm3.static.flickr.com/2488/4162200310_943fc8b4c3.jpg" alt="" width="500" height="492" /></p>

<p>吉洪诺夫是《春天的十七个瞬间》里施季里茨的扮演者，春天的十七个瞬间是一部70年代的间谍片，或者说电视剧也行，它有12集。吉洪诺夫扮演的是一个非常牛逼的角色，具体有多牛逼，我也不用自己孱弱的表达能力去描述了，如果有一天大家有机会有耐心看完，多少也能够了解。</p>

<p>第一次看《春天的十七个瞬间》是在缤纷多彩的高三暑假，2005年夏天。中央八套每晚十点左右，一天两集，我印象中当时并没有播完，尤其是到了最后变成了缩减版，结尾都没有播全。那是为数不多的我和我妈都能感兴趣的事物，因为播的时间比较晚，通常是第二天我妈来向我了解剧情。现在想起来，这是一段非常值得回忆的时光。</p>

<p>直到现在我还是很容易被老电影里的英雄人物吸引、单纯地敬仰。施季里茨送走普列什聂耳回柏林的路上，在车里睡了十五分钟。旁白大约说道，多年紧张的特工工作使他睡眠的时间可以自己掌握。这个情节印象非常深刻，以至于不断地想起来不断地试图模仿。</p>

<p>那时还没有视频网站，为了能够看全，后来还买了DVD，是我仅有的一套DVD。从头到尾看过三四遍，还在宿舍里和同学一起看过。情节挺慢，能静下来一点一点享受完的机会不多。再，看完这么一部十二集的长片，时间成本上实在不小。不过这不影响我印象深刻，不影响每天上班路上哼电影里的插曲，不影响一个形象留给人的东西。</p>

<p>其实能看到的吉洪诺夫演的电影不多，《春天》和《战争与和平》是其中最有名的，后者可惜我还没有看过。到了苏联解体以后，吉洪诺夫还在米亥科夫的《烈日灼人》里扮演了一个角色。这部电影我看过，但是吉洪诺夫的角色是今天上午才知道，看电影的时候完全没有发觉，因为像“施季里茨也会变老”这样的事实实在是很容易被忽略。</p>

<p>想到这里，我大概不用再写了，因为对于我这样的观众来说，其实吉洪诺夫还有施季里茨们一直都在我们身边。即使走了，也走不远。所以我把标题里的“别了”删掉，祝他们一切都好。
</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/blog/2009/12/06/tikhonov/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2009/11/29/adding-ubuntu-gis-repository/">Adding Ubuntu-GIS Repository</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-11-29T00:00:00+08:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>在Ubuntu上安装GIS软件，可以添加这个PPA源：<em>
deb http://ppa.launchpad.net/ubuntugis/ubuntugis-unstable/ubuntu karmic main</em></p>

<p>导入GPG KEY
<em>gpg &#8211;keyserver subkeys.pgp.net &#8211;recv 089EBE08314DF160<br />
gpg &#8211;export &#8211;armor 089EBE08314DF160 | sudo apt-key add -</em></p>

<p>这个源中目前包含了最新版本的GIS软件：
<ul>
	<li>gdal 1.6</li>
	<li>grass</li>
	<li>qgis</li>
</ul></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2009/11/27/%E5%9C%A8rhel4%E4%B8%8A%E6%90%AD%E5%BB%BApythonlighttpdfastcgi%E7%8E%AF%E5%A2%83/">在RHEL4上搭建Python/Lighttpd/FastCGI环境</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-11-27T00:00:00+08:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>在一台赤裸裸的RHEL4上部署web.py程序，一切从几乎是从零开始。以下操作均以root用户操作。
<h2>1. 安装MySQL数据库</h2>
<strong>下载安装MySQL</strong>
<em>wget http://dev.mysql.com/get/Downloads/MySQL-5.1/mysql-5.1.41-linux-i686-glibc23.tar.gz/from/http://mirror.services.wisc.edu/mysql/</em>
解压，按照INSTALL文件说明进行安装，不多赘述
<h2>2. 安装Python环境</h2>
<h3>下载Python源码</h3>
<em>wget http://www.python.org/ftp/python/2.6.4/Python-2.6.4.tar.bz2</em>
解压，编译安装，不需要特殊操作。
<h3>下载Easy_install</h3>
<em>wget http://pypi.python.org/packages/2.6/s/setuptools/setuptools-0.6c11-py2.6.egg</em>
安装
<em>sh setuptools-0.6c11-py2.6.egg</em>
<h3>安装相关Packages</h3>
<em>easy_install DBUtils<br />
easy_install flup<br />
easy_install web.py</em>
<h3>安装mysql-python</h3>
mysql-python包不能用easy_install安装，手动下载
<em>wget http://downloads.sourceforge.net/project/mysql-python/mysql-python-test/1.2.3b1/MySQL-python-1.2.3b1.tar.gz?use_mirror=softlayer</em>
加压，编辑site.cfg<br />
指定mysql_config的路径，注意是新安装的mysql路径
<em>mysql_config=/usr/local/mysql/bin/mysql_config</em>
编译、安装
<em>python setup.py build<br />
python setup.py install</em>
声明libmysqlclient路径
<em>export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/mysql/lib</em>
<h2>3. 安装服务器环境</h2>
<h3>下载安装fastcgi头文件</h3>
<em>wget http://www.fastcgi.com/dist/fcgi.tar.gz</em>
解压，默认编译安装
<h3>下载安装PCRE</h3>
<em>wget ftp://ftp.csx.cam.ac.uk/pub/software/programming/pcre/pcre-8.00.tar.bz2</em>
解压，默认编译安装
<h3>下载lighttpd</h3>
<em>wget http://download.lighttpd.net/lighttpd/releases-1.4.x/lighttpd-1.4.25.tar.bz2</em>
configure时指定<em>&#8211;prefix=/usr/local/lighttpd</em>
编译，安装
<h2>4. 配置</h2>
lighttpd fastcgi运行web.py程序请参考
<a href="http://www.classicning.com/blog/2009/11/lighttpd%e9%80%9a%e8%bf%87fastcgi%e8%bf%90%e8%a1%8cweb-py%e7%a8%8b%e5%ba%8f/">http://www.classicning.com/blog/2009/11/lighttpd%e9%80%9a%e8%bf%87fastcgi%e8%bf%90%e8%a1%8cweb-py%e7%a8%8b%e5%ba%8f/</a></p>

<p>非常重要的几点注意：
<ul>
	<li>通过fastcgi运行的python脚本必须具有可执行权限，<em> chmod u+x web/main.py</em>；</li>
	<li>重启fastcgi程序需要删除/tmp/fastcgi.socket*</li>
</ul>
任何Python程序出错、权限错误都会导致lighttpd这样的报错：
<em>2009-11-27 18:12:02: (mod_fastcgi.c.1108) child exited with status 13 /home/admin/web/main.py<br />
2009-11-27 18:12:02: (mod_fastcgi.c.1111) If you&#8217;re trying to run your app as a FastCGI backend, make sure you&#8217;re using the FastCGI-enabled version.<br />
If this is PHP on Gentoo, add &#8216;fastcgi&#8217; to the USE flags.<br />
2009-11-27 18:12:02: (mod_fastcgi.c.1399) [ERROR]: spawning fcgi failed.<br />
2009-11-27 18:12:02: (server.c.931) Configuration of plugins failed. Going down.</em></p>

<p>报错会提示fastcgi未正确安装，而实际上仅仅是程序错误或权限问题而已。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2009/11/26/nginx-http-push/">Nginx HTTP Push</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-11-26T00:00:00+08:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>前些天看到一个Nginx的Module，用来是实现Comet，今天简单试了一下功能。作者名叫Leo Ponomarev，项目地址：http://pushmodule.slact.net/
<h3>安装</h3>
Module需要在编译时加入nginx，同时下载nginx和nginx-push-module，在nginx configure时增加一个参数：
<em>./configure &#8211;add-module=path/to/nginx_http_push_module</em>
<h3>使用</h3>
编写一个非常基本的nginx配置文件：
<pre class="brush:plain">events{
	worker_connections 1024;
}
http{
	server {
		listen	80;
		server_name	localhost;</pre></p>

<p>		location /publish {<br />
			set $push_channel_id $arg_id;</p>

<p>			push_publisher;</p>

<p>			push_store_messages on;<br />
			push_message_timeout 2h;<br />
			push_max_message_buffer_length 10;<br />
			push_min_message_recipients 0;<br />
		}</p>

<p>		location /subscribe{<br />
			push_subscriber;</p>

<p>			push_subscriber_concurrency broadcast;<br />
			set $push_channel_id $arg_id;<br />
			default_type text/plain;<br />
		}</p>

<p>	}<br />
}
一个简单的Server定义了两个路径分别用于publish和subscribe。所有相关的配置项可以在项目主页找到解释，不作赘述。</p>

<p>启动nginx
<em>nginx -c /home/sun/nginxpush/nginx-push.conf</em></p>

<p><em><span style="font-style: normal; background-color: #ffffff;">打开一个终端访问subscribe
<em> curl -X GET http://localhost/subscribe?id=0</em></span></em></p>

<p><span style="background-color: #ffffff;">可以看到HTTP请求被阻塞</span></p>

<p><span style="background-color: #ffffff;">打开另一个终端访问publish
<em> curl -X POST http://localhost/publish?id=0 -d &#8220;Hello World&#8221; </em></span></p>

<p><span style="background-color: #ffffff;">此时subscriber收到字符串&#8221;Hello World&#8221; ，完成HTTP请求。</span></p>

<p><span style="background-color: #ffffff;">subscriber可以通过设置HTTP头来对消息进行过滤，如
<em> curl -X POST http://localhost/publish?id=0 -d &#8220;Hello World&#8221;</em>
<em> curl -X GET http://localhost/subscribe?id=0 &#8211;verbose</em></span>
<div><em>*</em><span style="background-color: #ffffff;"><em> About to connect() to localhost port 80 (#0)</em></span></div>
<div><span style="background-color: #ffffff;"><em>*   Trying 127.0.0.1&#8230; connected</em></span></div>
<div><span style="background-color: #ffffff;"><em>* Connected to localhost (127.0.0.1) port 80 (#0)</em></span></div>
<div><span style="background-color: #ffffff;"><em>&gt; GET /subscribe?id=0 HTTP/1.1</em></span></div>
<div><span style="background-color: #ffffff;"><em>&gt; User-Agent: curl/7.19.7 (i686-pc-linux-gnu) libcurl/7.19.7 OpenSSL/0.9.8l zlib/1.2.3.3</em></span></div>
<div><span style="background-color: #ffffff;"><em>&gt; Host: localhost</em></span></div>
<div><span style="background-color: #ffffff;"><em>&gt; Accept: */*</em></span></div>
<div><span style="background-color: #ffffff;"><em>&gt; </em></span></div>
<div><span style="background-color: #ffffff;"><em>&lt; HTTP/1.1 200 OK</em></span></div>
<div><span style="background-color: #ffffff;"><em>&lt; Server: nginx/0.8.28</em></span></div>
<div><span style="background-color: #ffffff;"><em>&lt; Date: Thu, 26 Nov 2009 09:45:25 GMT</em></span></div>
<div><span style="background-color: #ffffff;"><em>&lt; Content-Type: application/x-www-form-urlencoded</em></span></div>
<div><span style="background-color: #ffffff;"><em>&lt; Content-Length: 10</em></span></div>
<div><span style="background-color: #ffffff;"><em>&lt; Last-Modified: Thu, 26 Nov 2009 09:44:59 GMT</em></span></div>
<div><span style="background-color: #ffffff;"><em>&lt; Connection: keep-alive</em></span></div>
<div><span style="background-color: #ffffff;"><em>&lt; Etag: 0</em></span></div>
<div><span style="background-color: #ffffff;"><em>&lt; Vary: If-None-Match, If-Modified-Since</em></span></div>
<div><span style="background-color: #ffffff;"><em>&lt; </em></span></div>
<div><span style="background-color: #ffffff;"><em>* Connection #0 to host localhost left intact</em></span></div>
<div><span style="background-color: #ffffff;"><em>* Closing connection #0</em></span></div>
<em>HelloWorld</em></p>

<p>从响应的头部可以看到Last-Modified: Thu, 26 Nov 2009 09:44:59 GMT的时间是上一次publish的时间，并且通过Vary字段提示了两个选项
<ul>
	<li>If-None-Match</li>
	<li>If-Modified-Since</li>
</ul>
RFC中对Vary头是这样解释的：</p>

<p>The Vary field value indicates the set of request-header fields that fully determines, while the response is fresh, whether a cache is permitted to use the response to reply to a subsequent request without revalidation.</p>

<p>即可以通过发送If-Modified-Since来获取指定时间之后的数据</p>

<p><em>curl -X GET -H &#8220;If-Modified-Since: Thu, 26 Nov 2009 09:44:50 GMT&#8221; http://localhost/subscribe?id=0 &#8211;verbose</em></p>

<p>这时subscribe会重新被阻塞而不是接收上次publish的数据，充分利用了HTTP的语义。</p>

<p>这样用push module来做Web-IM、聊天室的思路就非常清晰了：<span style="background-color: #ffffff;">每个浏览器保持一个subscriber连接，在接收到消息后连接关闭。把消息打印出来，并根据消息响应的头部Last-Modified请求重新subscribe。</span></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2009/11/23/%E8%BF%99%E4%B8%80%E5%88%87%E6%B2%A1%E6%9C%89%E6%83%B3%E8%B1%A1%E7%9A%84%E9%82%A3%E4%B9%88%E7%B3%9F/">这一切没有想象的那么糟</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-11-23T00:00:00+08:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>如果还不算太晚的话，大家抬头看看木星拱月吧，一张笑脸少了一只眼睛。今年这木星和月亮已经腻味了半年了。我倒是清楚记得去年冬天这场面也出现过，那时依稀是火星跟金星，没今天这亮但总归比今天齐全。当然不能太强求完整不是。</p>

<p>我们班刚工作的同学除了在张江的两位都回去考研了，顺利的话60%的大家又要团聚了。我想经历过这半年的同学回去以后肯定有更深刻的体会，我们这个专业找工作阻力很多很大，有的是没办法的事情。现在我又是在旁观者的角度看别人了，冷暖自知，自己的状况，也只有大家自己心里有数。</p>

<p>话说，好久没有码字了，下班一路上想了不少事情，回来写起来却非常吃力，表达能力进一步退化，恶性循环。</p>

<p>又，发现冬天听广播很有感觉，最早听广播还是某个冬天晚上六点半左右电视坏了寻找的替代，一晃今年正好是第十年。至于为什么时间记得这么清楚，呵，因为当时的节目到现在印象还很深。话说现在很多人肯定不能想象，我还有过打热线电话中奖的经历，不过中的什么门票到最后也没用着。那会南京电台还在著名的延龄巷50号，这个难找的地方着实花了我很长时间去领奖。</p>

<p>再，这个月公司也十周年，不过到现在都没看出有什么特别的动静，也没什么可透露的，估计是比不了马云家的大场面的。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2009/11/22/exaile-doubancovers-upgrades/">Exaile-DoubanCover 0.0.2</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-11-22T00:00:00+08:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>The Exaile plugin &#8220;Douban Covers&#8221; has been upgraded to 0.0.2. Now there is a new preference pane inside exaile preference dialog. This update provides you an optional choice to specify your own apikey when access douban.com open api. With an apikey, your request frequency will be raised to 40 times per minute.</p>

<p><img class="alignnone" src="http://farm3.static.flickr.com/2727/4124219684_c93af1dd03.jpg" alt="" width="500" height="414" /></p>

<p>Again, you can get the plugin from:
<a href="http://bitbucket.org/sunng/exailedoubancovers/downloads/">http://bitbucket.org/sunng/exailedoubancovers/downloads</a>/</p>

<p>Grab source with mercurial:
<em>hg close http://bitbucket.org/sunng/exailedoubancovers/</em></p>

<p>Also, exaile-cn has its first 0.3.0-compatible version released early today. As a part of Exaile-cn, Exaile-Doubancovers <strong>0.0.1</strong> has been packaged into the public release for the first time. Find the project at: <a href="http://code.google.com/p/exaile-cn/">http://code.google.com/p/exaile-cn/</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2009/11/20/groovy-http-builder-tips/">Groovy Http-builder Tips</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-11-20T00:00:00+08:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>最近用Groovy的HttpBuilder模块开发RESTful服务的客户端，遇到不少问题，浪费不少时间</p>

<p>网上的例子都是从Grape开始的，但是按照例子上运行，无论是通过grape install还是在代码里@Grab都没有办法把http builder加到classpath里，甚至依赖关系已经下载到~/.groovy/grapes里了，但是还是在import的时候报错。用Grails的时候也是一样，如果通过ivy定义依赖，通过ant下载到lib目录中，在grails shell里还是没有办法引用。不理解了，难道还需要手动再指定path吗。最后用grails的rest插件（grails install-plugin rest）总算是下载到了path中了。</p>

<p>第二是http builder的报错太智能了，它会把服务器端50x的报错输出在客户端。在查看错误的时候一定要分清楚。</p>

<p>第三是net.sf.json-lib这个库在转json的时候有一点问题，比如这样的js对象
<em>{&#8220;result&#8221;:&#8221;success&#8221;}</em></p>

<p>会因为key上有引号而无法解析，必须是这样的格式：
<em>{result: &#8220;success&#8221;}</em></p>

<p>至于那种是正确的json我也没有兴趣了解了，只是非常遗憾的是couchdb返回的都是前一种形式。</p>

<p>当然了，瑕不掩瑜，http builder还是提供了非常方便的封装，比直接用HttpURLConnection或是HttpClient更加Groovy</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2009/11/15/%E5%90%AC%E8%B1%86%E7%93%A3%E7%94%B5%E5%8F%B0%E7%9A%84%E6%9C%80%E4%BD%B3%E5%A7%BF%E5%8A%BF/">听豆瓣电台的最佳姿势</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-11-15T00:00:00+08:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>豆瓣电台，如果你是豆瓣用户我不多说了；如果不是豆瓣用户，嗯，算了，您换台吧。</p>

<p>总算找到Prism的用处了。如果你在用豆瓣电台，并且你使用Firefox，那么只要安装Prism，就可以把豆瓣电台变成一个任意大小的窗口，和你的多tab的浏览器分离。如果非常巧合你是一位少数派的Windows用户，嗯，Prism在Windows上还可以最小化到系统栏。</p>

<p>安装Prism扩展，嗯，最好确定你的Firefox是最新的（这个下雨的晚上最新的是3.5.5），当然也别新到3.6去。OK没有问题的话，就猛击下面这个链接：
<a href="https://addons.mozilla.org/en-US/firefox/addon/6665">https://addons.mozilla.org/en-US/firefox/addon/6665</a></p>

<p>注册都不需要了，直接点安装，然后等着重开Firefox就行了。安装完成，可以看到Tools菜单下面多了一个&#8221;Convert Website to application&#8230;&#8221; 这就是Prism，点开设置如下参数：</p>

<p><img class="alignnone" src="http://farm3.static.flickr.com/2489/4105923552_6c51a64048.jpg" alt="" width="415" height="500" /></p>

<p>Windows用户的选项会多一些，记得勾上那个show in the notification area（如果是这个名字的话），确定即可。</p>

<p>Windows用户（注意升级到3.5.5的Firefox）这时直接点桌面上的图标就可以了。由于cookie不能共享，你需要重登录一下，有必要的话最好选上“记住我”。等豆瓣电台的flash播放器出现的时候，把窗口拖到合适的大小，Prism会记住每次正常关闭时的窗口大小，下次打开就那么大。然后你把它最小化，于是就在右下角了（不好意思，至今我都不知道那个区域到底中文名叫什么，直译是提示区，但是从来没听人用普通话这么说过）。</p>

<p>Linux的用户稍微麻烦一些，第一次执行桌面生成的文件时会需要confirm，mark as trusted即可。因为和你的Firefox不共享数据，所以首次执行Prism程序会创建一套新的Firefox profile，然后检查插件更新，显示欢迎等等。没关系，关掉它，重新再执行一次，就会看到正常的登录框了，其他和Windows差不多。</p>

<p>但是Linux上的Prism还没有提供最小化到右上角(GNOME)或者右下角(KDE)或者其他什么角里的功能，怎么办？咱们有Window Manager，我是菜鸟，我刚会用Compiz，开启Scale Window吧，然后可以把窗口按比例缩小，所到不影响桌面工作，设不设置Always on top就看自己的想法了。</p>

<p>好的，就罗嗦到这里。</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/blog/page/31/">&larr; Older</a>
    
    <a href="/blog/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/blog/page/29/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>About Me</h1>
  <p>Ning Sun. Programmer. Map enthusiast. (<a href="http://sunng.info/">more</a>)</p>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/blog/2014/06/09/grouping-in-slacker-0-dot-12/">Slacker Cluster 0.12: Grouping</a>
      </li>
    
      <li class="post">
        <a href="/blog/blog/2014/05/27/fork-join-in-papaline/">Fork-Join in Papaline</a>
      </li>
    
      <li class="post">
        <a href="/blog/blog/2014/04/20/concurrent-pipeline-with-core-async/">Papaline: Concurrent Pipeline With core.async</a>
      </li>
    
      <li class="post">
        <a href="/blog/blog/2014/04/20/rust-concurrent-made-safely/">Rust语言：安全的并发</a>
      </li>
    
      <li class="post">
        <a href="/blog/blog/2014/03/04/slacker-0-dot-11-released/">Slacker Library Updated</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/sunng87">@sunng87</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'sunng87',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/blog/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>On Delicious</h1>
  <div id="delicious"></div>
  <script type="text/javascript" src="http://feeds.delicious.com/v2/json/classicing?count=3&amp;sort=date&amp;callback=renderDeliciousLinks"></script>
  <p><a href="http://delicious.com/classicing">My Delicious Bookmarks &raquo;</a></p>
</section>




  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Sun Ning -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'sunng-blog';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
