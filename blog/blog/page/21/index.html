
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Here comes the Sun</title>
  <meta name="author" content="Sun Ning">

  
  <meta name="description" content="上周Ubuntu 10.10 Maverick Meerkat beta发布了，本人向来是在Beta版发布的时候更新，然后经历一个月的黑白颠倒最终走向光明走向stable。因为我安装的规模有点大，这次升级总共要下载两千八百多个包，花了我两天的时间。 升级到Meerkat后，由于内核版本变成了2.6 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://sunng87.github.io/blog//blog/page/21">
  <link href="/blog/favicon.png" rel="icon">
  <link href="/blog/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/blog/atom.xml" rel="alternate" title="Here comes the Sun" type="application/atom+xml">
  <script src="/blog/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/blog/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/blog/">Here comes the Sun</a></h1>
  
    <h2>Sun Ning's web log</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/blog/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:sunng87.github.io/blog/" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/blog/">Blog</a></li>
  <li><a href="/blog/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2010/09/06/upgraded-to-maverick-meerkat/">Upgraded to Maverick Meerkat</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-09-06T00:00:00+08:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>上周Ubuntu 10.10 Maverick Meerkat beta发布了，本人向来是在Beta版发布的时候更新，然后经历一个月的黑白颠倒最终走向光明走向stable。因为我安装的规模有点大，这次升级总共要下载两千八百多个包，花了我两天的时间。</p>

<p>升级到Meerkat后，由于内核版本变成了2.6.35，原先ath5k网卡的驱动madwifi不能用了。这点一定要有心理准备，好在madwifi已经有了针对2.6.35的分支。可以从madwifi-project网站上下载：
<a href="http://snapshots.madwifi-project.org/madwifi-0.9.4-current.tar.gz">http://snapshots.madwifi-project.org/madwifi-0.9.4-current.tar.gz</a>
然后您可以根据UserGuide上的步骤进行操作：
<a href="http://madwifi-project.org/wiki/UserDocs/FirstTimeHowTo">http://madwifi-project.org/wiki/UserDocs/FirstTimeHowTo</a>
话说我升级了网卡驱动之后无线网路稳定性、速度都有了很明显的提升，对一个饱受无线掉线折磨的人来说，这个太重要了。（我先前使用的驱动是 madwifi-hal-0.10.5.6-r4119）</p>

<p>其他变化包括：
<ul>
	<li>主题多了橙色元素</li>
<li>indicator applet增加了几个新的图标</li>
<li>tracker applet可以显示出来了 -_-|||</li>
<li>Evolution 2.30 工具栏有点变化</li>
<li>UpdateManager UI有点变化</li>
<li>多了一个Input Method Switch的图形界面设置</li>
<li>Indicator多了network manager</li>
</ul></p>

<p>其他更新还要慢慢体会，不过总得来说这次10.10更新不多，恐怕也和GNOME3跳票有关吧。</p>

<p>The post is brought to you by <a href="http://fedorahosted.org/lekhonee">lekhonee</a> v0.7</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2010/09/05/a-day-in-expo/">A Day in Expo</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-09-05T00:00:00+08:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>A day in Expo, Shanghai.</p>

<p><a href="http://www.flickr.com/photos/40741608@N08/4957383122/" title="DSC_0015 by 贝小塔, on Flickr"><img src="http://farm5.static.flickr.com/4133/4957383122_818b9af46c.jpg" width="500" height="335" alt="DSC_0015" /></a></p>

<p><a href="http://www.flickr.com/photos/40741608@N08/4957392860/" title="DSC_0017 by 贝小塔, on Flickr"><img src="http://farm5.static.flickr.com/4076/4957392860_4249a043bc.jpg" width="500" height="335" alt="DSC_0017" /></a></p>

<p><a href="http://www.flickr.com/photos/40741608@N08/4956812599/" title="DSC_0023 by 贝小塔, on Flickr"><img src="http://farm5.static.flickr.com/4110/4956812599_fdd0e0b035.jpg" width="335" height="500" alt="DSC_0023" /></a></p>

<p><a href="http://www.flickr.com/photos/40741608@N08/4957416828/" title="DSC_0025 by 贝小塔, on Flickr"><img src="http://farm5.static.flickr.com/4096/4957416828_7d74399e72.jpg" width="500" height="335" alt="DSC_0025" /></a></p>

<p><a href="http://www.flickr.com/photos/40741608@N08/4957437892/" title="DSC_0026 by 贝小塔, on Flickr"><img src="http://farm5.static.flickr.com/4108/4957437892_5b92d804fd.jpg" width="500" height="335" alt="DSC_0026" /></a></p>

<p><a href="http://www.flickr.com/photos/40741608@N08/4957449690/" title="DSC_0028 by 贝小塔, on Flickr"><img src="http://farm5.static.flickr.com/4091/4957449690_22357b0ffc.jpg" width="500" height="335" alt="DSC_0028" /></a></p>

<p><a href="http://www.flickr.com/photos/40741608@N08/4958948524/" title="DSC_0032 by 贝小塔, on Flickr"><img src="http://farm5.static.flickr.com/4090/4958948524_08095c93cc.jpg" width="335" height="500" alt="DSC_0032" /></a></p>

<p><a href="http://www.flickr.com/photos/40741608@N08/4958953244/" title="DSC_0035 by 贝小塔, on Flickr"><img src="http://farm5.static.flickr.com/4086/4958953244_9d9dfa3fc3.jpg" width="335" height="500" alt="DSC_0035" /></a></p>

<p><a href="http://www.flickr.com/photos/40741608@N08/4958964376/" title="DSC_0053 by 贝小塔, on Flickr"><img src="http://farm5.static.flickr.com/4083/4958964376_b9054d2a3c.jpg" width="500" height="335" alt="DSC_0053" /></a></p>

<p><a href="http://www.flickr.com/photos/40741608@N08/4958390957/" title="DSC_0057 by 贝小塔, on Flickr"><img src="http://farm5.static.flickr.com/4086/4958390957_d62179b219.jpg" width="335" height="500" alt="DSC_0057" /></a></p>

<p><a href="http://www.flickr.com/photos/40741608@N08/4958405807/" title="DSC_0060 by 贝小塔, on Flickr"><img src="http://farm5.static.flickr.com/4094/4958405807_8a0dda2557.jpg" width="500" height="335" alt="DSC_0060" /></a></p>

<p><a href="http://www.flickr.com/photos/40741608@N08/4959010738/" title="DSC_0063 by 贝小塔, on Flickr"><img src="http://farm5.static.flickr.com/4151/4959010738_c5b6da5fe1.jpg" width="500" height="335" alt="DSC_0063" /></a></p>

<p><a href="http://www.flickr.com/photos/40741608@N08/4958468151/" title="DSC_0067 by 贝小塔, on Flickr"><img src="http://farm5.static.flickr.com/4142/4958468151_cf0f270d04.jpg" width="500" height="335" alt="DSC_0067" /></a></p>

<p><a href="http://www.flickr.com/photos/40741608@N08/4958477457/" title="DSC_0069 by 贝小塔, on Flickr"><img src="http://farm5.static.flickr.com/4126/4958477457_3437cbe143.jpg" width="500" height="335" alt="DSC_0069" /></a></p>

<p>早晨6点开始阳光就非常剧烈，不适合拍照，而且大部分时间都用来排队了，只留下这么一点点能看的而已。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2010/09/02/ls-my-python-packages/">Ls My Python Packages</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-09-02T00:00:00+08:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>在豆瓣上看到一个无聊的<a href="http://www.douban.com/online/10544092/">秀gems的活动</a>，我也无聊一下，秀一下eggs。</p>

<p><i>ls /usr/local/lib/python2.6/dist-packages/ | grep .egg | sed &#8216;s/\(.*\)/&lt;li&gt;\1&lt;\/li&gt;/&#8217;</i></p>

<p><ul>
<li>amqplib-0.6.1-py2.6.egg</li>
<li>argparse-1.1-py2.6.egg-info</li>
<li>AuthKit-0.4.5-py2.6.egg</li>
<li>avro-1.3.3-py2.6.egg</li>
<li>Beaker-1.3-py2.6.egg</li>
<li>Beaker-1.5.4-py2.6.egg</li>
<li>beanstalkc-0.2.0-py2.6.egg</li>
<li>bottle-0.8.1-py2.6.egg</li>
<li>bottle-0.8.3-py2.6.egg</li>
<li>bpython-0.9.6.2-py2.6.egg</li>
<li>bson-0.1.2-py2.6.egg</li>
<li>CherryPy-3.1.2-py2.6.egg</li>
<li>CouchDB-0.6-py2.6.egg</li>
<li>coverage-3.2-py2.6-linux-i686.egg</li>
<li>Cython-0.12.1-py2.6-linux-i686.egg</li>
<li>decorator-3.0.0-py2.6.egg</li>
<li>distribute-0.6.14-py2.6.egg</li>
<li>Django-1.0.2_final-py2.6.egg</li>
<li>Django-1.1-py2.6.egg</li>
<li>Django-1.2-py2.6.egg</li>
<li>django_sphinx-2.2.3-py2.6.egg</li>
<li>docutils-0.6-py2.6.egg</li>
<li>Editra-0.4.95-py2.6.egg</li>
<li>Editra-0.5.05-py2.6.egg</li>
<li>Editra-0.5.72-py2.6.egg</li>
<li>elementtree-1.2.7_20070827_preview-py2.6.egg</li>
<li>eventlet-0.9.9-py2.6.egg</li>
<li>Fabric-0.9.1-py2.6.egg</li>
<li>fapws3-0.5.dev-py2.6-linux-i686.egg</li>
<li>FormEncode-1.2.1-py2.6.egg</li>
<li>GeoAlchemy-0.1-py2.6.egg</li>
<li>Geohash-1.0rc1-py2.6.egg</li>
<li>gevent-0.13.0.egg-info</li>
<li>greenlet-0.3.1-py2.6-linux-i686.egg</li>
<li>gunicorn-0.10.0-py2.6.egg</li>
<li>gunicorn-0.11.0-py2.6.egg</li>
<li>gunicorn-0.8.1-py2.6.egg</li>
<li>httplib2-0.5.0-py2.6.egg</li>
<li>ipython-0.10-py2.6.egg</li>
<li>ipython-0.9.1-py2.6.egg</li>
<li>Jinja2-2.5-py2.6.egg</li>
<li>Mako-0.2.4-py2.6.egg</li>
<li>Mako-0.3.4-py2.6.egg</li>
<li>Markdoc-0.6.4-py2.6.egg-info</li>
<li>Markdown-2.0.3-py2.6.egg</li>
<li>Markdown-2.0.3-py2.6.egg-info</li>
<li>MarkupSafe-0.9.2-py2.6-linux-i686.egg</li>
<li>meinheld-0.3.1-py2.6-linux-i686.egg</li>
<li>Ming-0.2-py2.6.egg</li>
<li>mock-0.6.0-py2.6.egg</li>
<li>mocker-0.10.1-py2.6.egg</li>
<li>MySQL_python-1.2.3c1-py2.6-linux-i686.egg</li>
<li>networkx-1.0rc1-py2.6.egg</li>
<li>nose-0.10.4-py2.6.egg</li>
<li>numpy-1.4.1-py2.6-linux-i686.egg</li>
<li>Paste-1.7.2-py2.6.egg</li>
<li>PasteDeploy-1.3.3-py2.6.egg</li>
<li>PasteScript-1.7.3-py2.6.egg</li>
<li>pip-0.4-py2.6.egg</li>
<li>pip-0.8-py2.6.egg</li>
<li>progressbar-2.2-py2.6.egg</li>
<li>psycopg2-2.2.2-py2.6-linux-i686.egg</li>
<li>pycurl-7.19.0-py2.6-linux-i686.egg</li>
<li>pyev-0.5.3_3.8-py2.6-linux-i686.egg</li>
<li>Pygments-1.0-py2.6.egg</li>
<li>Pygments-1.3.1-py2.6.egg</li>
<li>pygooglechart-0.2.1-py2.6.egg</li>
<li>PyGreSQL-4.0-py2.6-linux-i686.egg</li>
<li>Pylons-0.9.7-py2.6.egg</li>
<li>Pylons-1.0-py2.6.egg</li>
<li>pymongo-1.6-py2.6-linux-i686.egg</li>
<li>pymongo-1.7-py2.6-linux-i686.egg</li>
<li>pymongo-1.8-py2.6-linux-i686.egg</li>
<li>pysal-1.0.0.egg-info</li>
<li>python_cjson-1.0.5-py2.6-linux-i686.egg</li>
<li>python_memcached-1.45-py2.6.egg</li>
<li>python_openid-2.2.5-py2.6.egg</li>
<li>PyXML-0.8.4-py2.6-linux-i686.egg</li>
<li>PyYAML-3.09-py2.6.egg-info</li>
<li>RDFobject-0.1.4-py2.6.egg</li>
<li>Rocket-1.1.1-py2.6.egg</li>
<li>Routes-1.10.3-py2.6.egg</li>
<li>Routes-1.12.3-py2.6.egg</li>
<li>Rtree-0.6.0-py2.6.egg</li>
<li>ruffus-2.2-py2.6.egg</li>
<li>scipy-0.8.0-py2.6-linux-i686.egg</li>
<li>setuptools-0.6c11-py2.6.egg-info</li>
<li>setuptools-0.6c9-py2.6.egg</li>
<li>setuptools-0.6c9-py2.6.egg.OLD.1283177768.67</li>
<li>Shapely-1.0.12-py2.6.egg</li>
<li>Shapely-1.2-py2.6.egg</li>
<li>simplejson-2.0.8-py2.6.egg</li>
<li>Spawning-0.9.3rc2-py2.6.egg</li>
<li>Sphinx-1.0b2-py2.6.egg</li>
<li>SQLAlchemy-0.6.3-py2.6.egg</li>
<li>Tempita-0.2-py2.6.egg</li>
<li>threadpool-1.2.7-py2.6.egg</li>
<li>tornado-0.2-py2.6.egg</li>
<li>twill-0.9-py2.6.egg</li>
<li>Twisted-10.1.0-py2.6-linux-i686.egg</li>
<li>vimpdb-0.3.8-py2.6.egg</li>
<li>virtualenv-1.3.3-py2.6.egg</li>
<li>WebError-0.10.1-py2.6.egg</li>
<li>WebHelpers-0.6.4-py2.6.egg</li>
<li>WebOb-0.9.6.1-py2.6.egg</li>
<li>web.py-0.32-py2.6.egg-info</li>
<li>web.py-0.34-py2.6.egg</li>
<li>WebTest-1.1-py2.6.egg</li>
<li>Werkzeug-0.6.2-py2.6.egg</li>
<li>whizzer-0.2.egg-info</li>
</ul></p>

<p>话说用sed能不能让开头重复的行不输出呢？或者什么命令能实现？</p>

<p>The post is brought to you by <a href="http://fedorahosted.org/lekhonee">lekhonee</a> v0.7</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2010/08/31/open-for-a-new-job/">Open for a New Job</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-08-31T00:00:00+08:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I am about to leave current company and looking for a new challenge for future. If you are interested, and also looking for a Java or Python developer, please check the hot baked resume:
<ul>
<li><a href="http://sunng.info/resume_en.html">en</a></li>
<li><a href="http://sunng.info/resume_cn.html">zh</a></li>
</ul></p>

<p>Actually, I am not good at documenting myself. So if you need more details, feel free to get connected with email: classicning[at]gmail.com</p>

<p>The post is brought to you by <a href="http://fedorahosted.org/lekhonee">lekhonee</a> v0.7</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2010/08/28/%E5%91%A8%E8%AE%B0/">周记</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-08-28T00:00:00+08:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>先讲个<a href="http://www.douban.com/group/topic/13651452/">笑话</a>，然后回顾一下这个星期。</p>

<p>这个星期从周四晚上开始，和一位外国朋友一位台湾女士聊天。第一次经历这样的场面，忐忑得很，起初还尝试和大家说英文的，奈何我的口语和听力实在是难以支撑，最后不知不觉间大家都平滑过渡到中文了。后来我想着听力还可以通过看InfoQ上的会议录像什么的练习一下，口语就鲜有机会和场合提升了。进而又想到长期在一个小环境里做重复的事情，有些能力的退化你甚至都感觉不到，更不要说原先不具备的能力了，你甚至都不能觉察到自己缺乏某一方面的训练。</p>

<p>今天下午又和原先在IBM实习的同事聚会，正好在五角场附近转转。比起张江这种近乎边缘的生活环境，五角场实在是强太多了，更难能可贵的是如果你在附近转一转，询问一下房租，那里的生活成本实际上并不比张江高，生活质量实在是没法比。这是为什么呢？不理解。另外今天看到了<a href="http://blog.samsonis.me/2010/08/update-41-%E6%9C%89%E4%BA%9B%E4%BA%8B%E6%83%85%E6%88%91%E8%BF%98%E7%9C%9F%E4%B8%8D%E7%90%86%E8%A7%A3/">samson理解不了的沃尔玛</a>，还有传说中那一片Oracle / EMC / eBao / 百度。上海真是大，地铁走几站就是一个完全不同的世界。</p>

<p>从同事那里了解到了团购网站的一些事情，这年头，好像不做个团购网站都不好意思跟人打招呼似的。于是有了<a href="http://www.zuitu.com/">这种东西</a>，又是一窝蜂，这就是我们的互联网，你有什么意见呢。</p>

<p>昨天本想写一个对 Continuous Deployment 的理解来着，结果不料电脑过热死机了。什么原因呢，原来是浏览器里开着一个崔永元的网站，一个基于flash的网站，你懂的，CPU一直占满。这么明显的、严重的、高能耗的问题，这么多年了，Adobe一点动作都没有。另外我发现今天禁用了Adobe的Flashplayer居然Firefox的Ctrl+C/Ctrl+T等等几个快捷键突然恢复了，对于这种情况还是不说什么吧。最近听说开源的实现<a href="http://digitizor.com/2010/08/23/gnash-0-88-released-100-youtube-compatible-now/">gnash已经可以播放Youtube的视频</a>了（当然严格地说这事跟咱们没什么关系），一会写完blog我决定配置一下试试。</p>

<p>这周另一个重要的事情是Kindle 3上市了，第一次对一个手持设备产生这么强烈的兴趣。而且尤其是发现你没有那么容易的渠道能够买到它的时候，这种兴趣膨胀得更厉害了。半年前电子墨水的电子书都还在2000人民币以上，这次6寸不带3G的Kindle 3只要139美元，折合人民币连950都不到，这个领域很快又要炸开锅了。</p>

<p>最后，我把Bason放到Sonatype的<a href="https://oss.sonatype.org/content/repositories/snapshots/info/sunng/bason/"></a>OSS Repository上了。Sonatype提供了一个免费的Maven仓库，你可以把自己的开源项目deploy到这个仓库中方便分发。详情您可以去看<a href="https://docs.sonatype.org/display/repository/sonatype+oss+maven+repository+usage+guide">sonatype提供的文档</a>。</p>

<p>The post is brought to you by <a href="http://fedorahosted.org/lekhonee">lekhonee</a> v0.7</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2010/08/23/bason-a-bson-serialization-code-generator/">Bason: A BSON Serialization Code Generator</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-08-23T00:00:00+08:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Bason is a code generator for object to bson serialization and deserialization. Different from tranditional reflection way, bason uses an annotation processor to generate serialization manager at compile time. You just add Bason as compilation dependency and drop it in the runtime.</p>

<p>To use Bason, you simply add annotation to JavaBeans:<br />
[cc lang=&#8221;java&#8221;]<br />
/**<br />
 *<br />
 */<br />
package info.sunng.bason.example;</p>

<p>import java.util.Date;</p>

<p>import info.sunng.bason.annotations.BsonAlias;<br />
import info.sunng.bason.annotations.BsonDocument;<br />
import info.sunng.bason.annotations.BsonIgnore;</p>

<p>/**<br />
 * @author SunNing<br />
 *<br />
 * @since Aug 18, 2010<br />
 */<br />
@BsonDocument<br />
public class Passenger {</p>

<p>	private double packageWeight;</p>

<p>	private long ticketId;</p>

<p>	private String name;</p>

<p>	private Date createdDate;</p>

<p>	private Flight flight;</p>

<p>	/**<br />
	 * @return the packageWeight<br />
	 */<br />
	@BsonIgnore<br />
	public double getPackageWeight() {<br />
		return packageWeight;<br />
	}</p>

<p>	/**<br />
	 * @param packageWeight the packageWeight to set<br />
	 */<br />
	public void setPackageWeight(double packageWeight) {<br />
		this.packageWeight = packageWeight;<br />
	}</p>

<p>	/**<br />
	 * @return the ticketId<br />
	 */<br />
	@BsonAlias(&#8220;ticket&#8221;)<br />
	public long getTicketId() {<br />
		return ticketId;<br />
	}</p>

<p>	/**<br />
	 * @param ticketId the ticketId to set<br />
	 */<br />
	public void setTicketId(long ticketId) {<br />
		this.ticketId = ticketId;<br />
	}</p>

<p>	/**<br />
	 * @return the name<br />
	 */<br />
	public String getName() {<br />
		return name;<br />
	}</p>

<p>	/**<br />
	 * @param name the name to set<br />
	 */<br />
	public void setName(String name) {<br />
		this.name = name;<br />
	}</p>

<p>	/**<br />
	 * @param createdDate the createdDate to set<br />
	 */<br />
	public void setCreatedDate(Date createdDate) {<br />
		this.createdDate = createdDate;<br />
	}</p>

<p>	/**<br />
	 * @return the createdDate<br />
	 */<br />
	public Date getCreatedDate() {<br />
		return createdDate;<br />
	}</p>

<p>	/**<br />
	 * @param flight the flight to set<br />
	 */<br />
	public void setFlight(Flight flight) {<br />
		this.flight = flight;<br />
	}</p>

<p>	/**<br />
	 * @return the flight<br />
	 */<br />
	public Flight getFlight() {<br />
		return flight;<br />
	}</p>

<p>}</p>

<p>[/cc]
<ul>
<li>@BsonDocument marks this bean to be processed by bason processor. Serialization and deserialization support for this bean will be added to the manager. The bean must follow the Java Bean specification that has a getter and a setter for each property.</li>
<li>@BsonAlias on the getter allows user the specify a name for bson document instead of the default java bean property name.</li>
<li>@BsonIgnore on the getter marks a property to be transient when serialization and deserialization.</li>
</ul></p>

<p>Then you need a <i>bason.properties</i> at the root of classpath which looks like<br />
[cc lang=&#8221;properties&#8221;]<br />
bason.managerClassName=info.sunng.bason.BasonManager<br />
[/cc]<br />
You specify the manager class name here. This name can not be duplicated if you use Bason in multiple modules.</p>

<p>Take maven configuration as an example:<br />
[cc lang=&#8221;xml&#8221;]<br />
	<dependencies>
		<dependency>
			<groupid>info.sunng.bason</groupid>
			<artifactid>bason-annotation</artifactid>
			<scope>compile</scope>
		</dependency>
		<dependency>
			<groupid>info.sunng.bason</groupid>
			<artifactid>bason-internal</artifactid>
			<scope>compile</scope>
		</dependency>
		<dependency>
			<groupid>org.mongodb</groupid>
			<artifactid>mongo-java-driver</artifactid>
		</dependency>
	</dependencies></p>

<p>	<build>
		<finalname>${project.artifactId}</finalname></build></p>

<p>		<plugins>
			<plugin>
				<groupid>org.apache.maven.plugins</groupid>
				<artifactid>maven-compiler-plugin</artifactid></plugin></plugins></p>

<p>				<configuration>
					<source>1.6</source>
					<target>1.6</target></configuration></p>

<p>					<compilerarguments>
						<processor>info.sunng.bason.internal.BasonProcessor</processor>
					</compilerarguments>
				
			
		
	
[/cc]</p>

<p> when everything is ready, run <i>mvn compile</i> to generate the manager source file. By default, in a standard maven project, the generated file will be placed at:
<i>/bason-example/target/generated-sources/annotations/</i>
[cc lang=&#8221;java&#8221;]<br />
package info.sunng.bason;<br />
import org.bson.*;<br />
import javax.annotation.Generated;<br />
@Generated({&#8220;info.sunng.bason.BasonManager&#8221;})<br />
public final class BasonManager{<br />
    public static final BSONObject toBson(info.sunng.bason.example.Passenger o){<br />
        if (o == null) {<br />
            throw new NullPointerException();<br />
        }<br />
        BSONObject bson = new BasicBSONObject();<br />
        bson.put(&#8220;ticket&#8221;,o.getTicketId());<br />
        bson.put(&#8220;name&#8221;,o.getName());<br />
        bson.put(&#8220;createdDate&#8221;,o.getCreatedDate());<br />
        bson.put(&#8220;flight&#8221;,toBson(o.getFlight()));<br />
        return bson;<br />
    }<br />
    public static final info.sunng.bason.example.Passenger fromBson(info.sunng.bason.example.Passenger o, BSONObject bson){<br />
        if (o == null || bson == null) {<br />
            throw new NullPointerException();<br />
        }<br />
        o.setTicketId((java.lang.Long)bson.get(&#8220;ticket&#8221;));<br />
        o.setName((java.lang.String)bson.get(&#8220;name&#8221;));<br />
        o.setCreatedDate((java.util.Date)bson.get(&#8220;createdDate&#8221;));<br />
        o.setFlight(fromBson(new info.sunng.bason.example.Flight(), (BSONObject)bson.get(&#8220;flight&#8221;)));<br />
        return o;<br />
    }<br />
    public static final BSONObject toBson(info.sunng.bason.example.Flight o){<br />
        if (o == null) {<br />
            throw new NullPointerException();<br />
        }<br />
        BSONObject bson = new BasicBSONObject();<br />
        bson.put(&#8220;company&#8221;,o.getCompany());<br />
        bson.put(&#8220;flightId&#8221;,o.getFlightId());<br />
        return bson;<br />
    }<br />
    public static final info.sunng.bason.example.Flight fromBson(info.sunng.bason.example.Flight o, BSONObject bson){<br />
        if (o == null || bson == null) {<br />
            throw new NullPointerException();<br />
        }<br />
        o.setCompany((java.lang.String)bson.get(&#8220;company&#8221;));<br />
        o.setFlightId((java.lang.String)bson.get(&#8220;flightId&#8221;));<br />
        return o;<br />
    }<br />
}</p>

<p>[/cc]</p>

<p>The project is hosted at
<a href="http://github.com/sunng87/bason">http://github.com/sunng87/bason</a></p>

<p>If you have any ideas, just let me know.</p>

<p>The post is brought to you by <a href="http://fedorahosted.org/lekhonee">lekhonee</a> v0.7</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2010/08/19/introduction-to-amoeba/">Introduction to Amoeba</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-08-19T00:00:00+08:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Amoeba is a distributed database middleware works as mysql proxy, provides sharding and high availability support for large scale applications using multiple mysql servers as backend.</p>

<p>Compatible with mysql protocol, Amoeba is fully transparent to any client using standard mysql drivers, which means, to use Amoeba you don&#8217;t have to modify any code of database connector. You just configure rules for amoeba, then the client request will automatically route to certain mysql instance. Amoeba has a flexible set of configuration rules that can satisfy your requirements.</p>

<p>Amoeba is written in Java, and deployed on Linux server in most cases. The IO module is built on the top of Java nonblocking IO, which keeps communication between client, Amoeba and mysql at a high performance.</p>

<p>The project is initialized in 2008. Stable release 1.2.1-GA have been available since July, 2010 . It is now serving on the production environment of the social networks <a href="http://t.sdo.com/">http://t.sdo.com/</a></p>

<p>Project home:
<a href="http://code.google.com/p/amoeba/">http://code.google.com/p/amoeba/</a></p>

<p>Development logs:
<a href="http://amoeba.meidusa.com/wordpress/">http://amoeba.meidusa.com/wordpress/</a></p>

<p>The post is brought to you by <a href="http://fedorahosted.org/lekhonee">lekhonee</a> v0.7</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2010/08/17/geb-for-browser-functional-testing/">Geb for Browser Functional Testing</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-08-17T00:00:00+08:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>虽然现在不做前段了，但是发现好的工具还是很兴奋。今天在twitter上看到Grails in Action的作者 @pledbrook 转了一个geb 0.4的消息，顺带看了一下这个工具<br />
http://geb.codehaus.org</p>

<p>geb项目旨在创造一套groovy dsl帮助人们进行webapp的functional test。它是对selenium的封装，举例：<br />
[cc lang=&#8221;groovy&#8221;]<br />
@Grapes([<br />
    @Grab(&#8216;org.seleniumhq.selenium:selenium-firefox-driver:latest.release&#8217;),<br />
    @Grab(&#8216;org.codehaus.geb:geb-core:latest.release&#8217;)<br />
])<br />
import geb.*</p>

<p>println &#8220;Dependencies downloaded, ready for testing&#8221;<br />
Browser.drive(&#8216;http://sunng.info:8000/Pacajus&#8217;){<br />
    assert title== &#8216;Pacajus&#8217;</p>

<p>    assert $(&#8220;p&#8221;, 3).text() == &#8216;Population: 41558&#8217;<br />
}
println &#8220;Tested, bye&#8221;<br />
[/cc]</p>

<p>打开页面，执行断言。如果断言失败，driver方法会报null：<br />
Caught: geb.error.DriveException: null</p>

<p>只要在命令行用groovy执行即可，grapes会搞定依赖关系。</p>

<p>很方便吧，文档上说还可以跟grails / junit等等集成，快去看看吧
<a href="http://geb.codehaus.org/manual/latest/index.html">http://geb.codehaus.org/manual/latest/index.html</a></p>

<p>The post is brought to you by <a href="http://fedorahosted.org/lekhonee">lekhonee</a> v0.7</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2010/08/13/next-to-richard-stallman/">Next to Richard Stallman</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-08-13T00:00:00+08:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><p>我这个人一般不八卦，你知道的。但是个别时候实在是情难以堪。</p>
<p>Bug 626593 - Gnome ate my boyfriend! Help!<br />
<a href="https://bugzilla.gnome.org/show_bug.cgi?id=626593">https://bugzilla.gnome.org/show_bug.cgi?id=626593</a></p>
<p>这位女士在GNOME bugzilla上提交bug，bug提交在empathy项目下。（注 dict empathy: 心意相通）</p>
<p>先不看正文，备注信息就极具幽默感：<br />
Status:  	 RESOLVED INVALID<br />
Product: 	empathy<br />
Component: 	User Guide<br />
Version: 	unspecified<br />
OS: 	Windows<br />
Importance:  	Normal critical </p>
<p>是不是真的RESOLVED就不知道了。</p>
<p>事情的直接原因是上周海牙GUADEC，此男cancel了周末和这位reporter的约会。此女不堪长期忍受此男、Linux、Maemo、C等等，彻底爆发了。</p>
<p>He even tried to put Linux on my computer and I simply could not take it.  I came home from work one day and my computer said &#8220;UNIX&#8221; all over it!<br />
这句有力的证明了我曾经看到的一句箴言，给女生装linux，对她们、对电脑、对linux都是一种折磨。</p>
<p>接下来搞笑开始了。一楼就是一位极缺乏幽默感的大叔：<br />
Akhil Laddha      2010-08-11 06:45:46 UTC<br />
This is a GNOME bug tracking system, not any family consultancy.</p>
<p>二楼是位好心人，提出了一个Linux week计划，还一厢情愿整了个交易计划：<br />
for each bug you report, he has to spend one night with you without the computer.</p>
<p>八楼精华：<br />
 David Liang      2010-08-12 08:53:16 UTC<br />
不得不顶</p>
<p>九楼亮出一个家属俱乐部的邮件列表：<br />
gnome-women-list@gnome.org，说你要是在家属圈子里麻将打得无敌手，自然你的boyfriend就崇拜你了，到时你就是爷了</p>
<p>高潮在十楼出现了，“你不说这男的是谁我们怎么帮你？”</p>
<p>紧接着十一楼一位神秘人士笑而不语。</p>
<p>十四楼比较直接<br />
#apt-get remove boyfriend &#8211;purge</p>
<p>十九楼知道宁拆十座庙的道理，建议先查看一下情况再说：<br />
cat /dev/boyfriend | grep love</p>
<p>最冷的是十六楼说咱们有这么个项目的：<br />
<a href="http://projects.gnome.org/outreach/women/">http://projects.gnome.org/outreach/women/</a></p>
<p>你以为故事就这么结束了，你错了。<br />
没想到男主人公的网站被我不经意间人肉出来了：<br />
<a href="http://zachgoldberg.com">http://zachgoldberg.com</a></p>
<p>一上来第一篇就说这事：<br />
<a href="http://zachgoldberg.com/2010/08/12/help-my-girlfriend-learned-how-to-use-a-bug-tracker/">HELP! My Girlfriend Learned How To Use A Bug Tracker</a></p>
<p>I never thought it would happen.</p>
<p>此男字字珠玑：<br />
It all started one night when I got home very late from work (where I get to play with Linux all day… who would ever go home?).  I got the usual “you need to pay more attention to me” and “Linux will never have sex with you!”.  I sat through it all and when it was over she went to sleep and I…. opened up my Laptop (running Ubuntu Linux, of course) and started hacking.  All is right with the world.</p>
<p>于是他发现自己上了LWN的Quote of the Week，和RMS的新闻并列，然后又被转载到hacker news, geek.com, slashdot。他感叹道 I never imagined my entry into the “slashdot number of zero” (think Erdos or Kevin Bacon) club would happen in this way.</p>
<p>最后他说他要开一个bugs.zachgoldberg.com专门解决这类的问题，If you want your own component in the bugtracker to help you and your loved one vent your problems all you need to do is ask!</p>
<p>哈哈哈哈</p>
<p>补充个精华链接：http://www.reddit.com/r/linux/comments/d02j6/bug_626593_gnome_ate_my_boyfriend/</p>
<p>最后daf同学总结性地指出，她不会学习使用bug tracker。</p>
<p>The post is brought to you by <a href="http://fedorahosted.org/lekhonee">lekhonee</a> v0.7</p></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2010/08/11/beanstalkd/">Beanstalkd</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-08-11T00:00:00+08:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://kr.github.com/beanstalkd/">beanstalkd</a>是一个极轻量级的消息队列服务，作者的说法叫做Work Queue。</p>

<p><h3>概念</h3></p>

<p>Beanstalkd里包含以下几个概念：
<ul>
<li>Producer</li>
<li>Worker</li>
<li>Job</li>
<li>Tube</li>
</ul></p>

<p>Producer 与传统的消息队列服务中的概念类似，是Job的生产者。这个角色通过put命令来创建Job。</p>

<p>Worker 即消费者，worker通过reserve / release / bury / delete 等命令操作job的生命周期。</p>

<p>Job 是beanstalkd中的基本单元，一个job包含id和body，从属于一个tube。Job的生命周期是beanstalkd中的核心概念，它包含DELAYED / READY / RESERVED / BURIED / DELETED等状态。beanstalkd文档中的这个图对Job的声明周期进行了说明：
<a href="http://github.com/kr/beanstalkd/blob/master/doc/protocol.txt#L81">http://github.com/kr/beanstalkd/blob/master/doc/protocol.txt#L81</a></p>

<p>Tube 是类似namespace的概念，Producer在生产Job前通过use指定相应的Tube。而Worker通过watch / Ignore命令来决定从哪些Tube中获得Job。</p>

<p><h3>安装</h3></p>

<p>Beanstalkd 可以通过很多Linux发行版的包管理器直接安装。依赖libevent 1.4.1 以上版本。<br />
通过以下命令启动即可</p>

<p><i>beanstalkd -d -p &lt;PORT&gt;</i></p>

<p><h3>协议</h3>
Beanstalkd在各方面都继承memcached的风格，协议也与memcached类似，同样是基于文本的：</p>

<p>命令 参数 [参数&#8230;] [命令体字节数]\r\n<br />
[命令体]\r\n</p>

<p>beanstalkd很多命令的返回是yaml格式，但是系统对命令体的格式并没有限制。</p>

<p><h3>客户端</h3></p>

<p>Beanstalkd协议见简单，有各种语言的客户端实现。python有一个非常简单的beanstalkc，可以通过easy_install安装。不过，这个客户端缺少断线重连机制，正式发布的0.2.0版本也有一些严重的bug。可以从github上下载源代码安装，并在使用时控制重连。</p>

<p>The post is brought to you by <a href="http://fedorahosted.org/lekhonee">lekhonee</a> v0.7</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/blog/page/22/">&larr; Older</a>
    
    <a href="/blog/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/blog/page/20/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>About Me</h1>
  <p>Ning Sun. Programmer. Map enthusiast. (<a href="http://sunng.info/">more</a>)</p>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/blog/2014/07/08/microservice-and-slacker-cluster/">Clojure Microservice Architecture With Slacker Cluster</a>
      </li>
    
      <li class="post">
        <a href="/blog/blog/2014/07/07/new-android-apps/">Mapzei 和 观察者</a>
      </li>
    
      <li class="post">
        <a href="/blog/blog/2014/07/01/extend-linux-ephemeral-ports/">扩展 Linux Ephemeral 端口限制</a>
      </li>
    
      <li class="post">
        <a href="/blog/blog/2014/06/09/grouping-in-slacker-0-dot-12/">Slacker Cluster 0.12: Grouping</a>
      </li>
    
      <li class="post">
        <a href="/blog/blog/2014/05/27/fork-join-in-papaline/">Fork-Join in Papaline</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/sunng87">@sunng87</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'sunng87',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/blog/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>On Delicious</h1>
  <div id="delicious"></div>
  <script type="text/javascript" src="http://feeds.delicious.com/v2/json/classicing?count=3&amp;sort=date&amp;callback=renderDeliciousLinks"></script>
  <p><a href="http://delicious.com/classicing">My Delicious Bookmarks &raquo;</a></p>
</section>




  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Sun Ning -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'sunng-blog';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
