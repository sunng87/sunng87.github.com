
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Here comes the Sun</title>
  <meta name="author" content="Sun Ning">

  
  <meta name="description" content="豆瓣电台，如果你是豆瓣用户我不多说了；如果不是豆瓣用户，嗯，算了，您换台吧。 总算找到Prism的用处了。如果你在用豆瓣电台，并且你使用Firefox，那么只要安装Prism，就可以把豆瓣电台变成一个任意大小的窗口，和你的多tab的浏览器分离。如果非常巧合你是一位少数派的Windows用户，嗯， &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://sunng87.github.io/blog//blog/page/31">
  <link href="/blog/favicon.png" rel="icon">
  <link href="/blog/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/blog/atom.xml" rel="alternate" title="Here comes the Sun" type="application/atom+xml">
  <script src="/blog/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/blog/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/blog/">Here comes the Sun</a></h1>
  
    <h2>Sun Ning's web log</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/blog/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:sunng87.github.io/blog/" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/blog/">Blog</a></li>
  <li><a href="/blog/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2009/11/15/%E5%90%AC%E8%B1%86%E7%93%A3%E7%94%B5%E5%8F%B0%E7%9A%84%E6%9C%80%E4%BD%B3%E5%A7%BF%E5%8A%BF/">听豆瓣电台的最佳姿势</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-11-15T00:00:00+08:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>豆瓣电台，如果你是豆瓣用户我不多说了；如果不是豆瓣用户，嗯，算了，您换台吧。</p>

<p>总算找到Prism的用处了。如果你在用豆瓣电台，并且你使用Firefox，那么只要安装Prism，就可以把豆瓣电台变成一个任意大小的窗口，和你的多tab的浏览器分离。如果非常巧合你是一位少数派的Windows用户，嗯，Prism在Windows上还可以最小化到系统栏。</p>

<p>安装Prism扩展，嗯，最好确定你的Firefox是最新的（这个下雨的晚上最新的是3.5.5），当然也别新到3.6去。OK没有问题的话，就猛击下面这个链接：
<a href="https://addons.mozilla.org/en-US/firefox/addon/6665">https://addons.mozilla.org/en-US/firefox/addon/6665</a></p>

<p>注册都不需要了，直接点安装，然后等着重开Firefox就行了。安装完成，可以看到Tools菜单下面多了一个&#8221;Convert Website to application&#8230;&#8221; 这就是Prism，点开设置如下参数：</p>

<p><img class="alignnone" src="http://farm3.static.flickr.com/2489/4105923552_6c51a64048.jpg" alt="" width="415" height="500" /></p>

<p>Windows用户的选项会多一些，记得勾上那个show in the notification area（如果是这个名字的话），确定即可。</p>

<p>Windows用户（注意升级到3.5.5的Firefox）这时直接点桌面上的图标就可以了。由于cookie不能共享，你需要重登录一下，有必要的话最好选上“记住我”。等豆瓣电台的flash播放器出现的时候，把窗口拖到合适的大小，Prism会记住每次正常关闭时的窗口大小，下次打开就那么大。然后你把它最小化，于是就在右下角了（不好意思，至今我都不知道那个区域到底中文名叫什么，直译是提示区，但是从来没听人用普通话这么说过）。</p>

<p>Linux的用户稍微麻烦一些，第一次执行桌面生成的文件时会需要confirm，mark as trusted即可。因为和你的Firefox不共享数据，所以首次执行Prism程序会创建一套新的Firefox profile，然后检查插件更新，显示欢迎等等。没关系，关掉它，重新再执行一次，就会看到正常的登录框了，其他和Windows差不多。</p>

<p>但是Linux上的Prism还没有提供最小化到右上角(GNOME)或者右下角(KDE)或者其他什么角里的功能，怎么办？咱们有Window Manager，我是菜鸟，我刚会用Compiz，开启Scale Window吧，然后可以把窗口按比例缩小，所到不影响桌面工作，设不设置Always on top就看自己的想法了。</p>

<p>好的，就罗嗦到这里。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2009/11/12/use-pipe-in-subprocess/">Use Pipe in Subprocess</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-11-12T00:00:00+08:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><h3>问题：</h3>
您要通过python的subprocess模块执行一些命令，要在程序中获得命令的标准输出，此外，命令中还有管道操作。
<h3>解决：</h3>
以这个命令为例：
<em>cat /home/admin/deploy/log/2009-11-11.log ｜grep example.com ｜wc -l</em>
<pre class="brush:python">
import subprocess</pre></p>

<p>cmd1 = &#8216;cat /home/admin/deploy/log/2009-11-11.log&#8217;<br />
cmd2 = &#8216;grep example.com&#8217;<br />
cmd3 = &#8216;wc -l&#8217;</p>

<p>pipe1 = subprocess.Popen(cmd1.split(), stdout=subprocess.PIPE)<br />
pipe2 = subprocess.Popen(cmd2.split(), stdin=pipe1, stdout=subprocess.PIPE)<br />
pipe3 = subprocess.Popen(cmd3.split(), stdin=pipe2, stdout=subprocess.PIPE)</p>

<p>result = pipe3.communicate()[0]
</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2009/11/10/doubancovers-has-been-merged-into-exaile-cn/">DoubanCovers Has Been Merged Into Exaile-cn</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-11-10T00:00:00+08:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>既然是exaile-cn，就不扯蹩脚的英语了。</p>

<p>前天和Exaile-cn的作者进行了一些沟通，现在DoubanCovers插件已经合并到Exaile-CN项目里了。<a href="http://code.google.com/p/exaile-cn/">Exaile-CN</a>为Exaile提供符合中文用户习惯的一系列插件，包括歌词插件、迷你模式等。</p>

<p>As exaile-cn has not been adapted to exaile 0.3, the plugin will not be packaged into public release at once. if you use svn, you can checkout the plugin from branch:
<em>svn checkout http://exaile-cn.googlecode.com/svn/branches/0.3/</em></p>

<p>For a ready to use package, download from here as mentioned before:
<a href="http://bitbucket.org/sunng/exailedoubancovers/downloads/">http://bitbucket.org/sunng/exailedoubancovers/downloads/</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2009/11/10/come-back-to-see-you/">Come Back to See You</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-11-10T00:00:00+08:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>在彻查病毒之前这个网站的可访问性已经差到一定程度为此我甚至加了cron任务每天定时两次恢复文件但是怎奈病毒运行时间无常最后难免心力交瘁。</p>

<p>现在问题基本解决在可预见的将来网站的可访问性暂时不会再有问题了大家也不用担心打开本人网站的时候被执行广告代码或者重定向到什么世外桃源去了。</p>

<p>在清理病毒期间正好在<a href="http://linuxtoy.org/archives/douban-covers.html" target="_blank">linuxtoy上发了一篇文章</a>可惜因为清理病毒没有赚到点击量和知名度了。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2009/11/05/exaile-cover-plugin-douban-covers/">Exaile Cover Plugin: Douban Covers</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-11-05T00:00:00+08:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I have created a plugin for <a href="http://exaile.org" target="_blank">exaile</a> which fetches album cover from <a href="http://douban.com" target="_blank">douban.com</a></p>

<p>You can download the plugin archive from:
<a href="You can download the plugin archive from: http://bitbucket.org/sunng/exailedoubancovers/downloads/">http://bitbucket.org/sunng/exailedoubancovers/downloads/</a></p>

<p>To install it, open exaile, click menu edit &gt;&gt; preference &gt;&gt; plugins, hit button &#8220;install plugin file&#8221;, select &#8220;doubancovers.tgz&#8221;(if you cannot find the file, just change filter to &#8220;all files&#8221;)</p>

<p>In some cases, the plugin could not be shown in the list at once, you can close the preference dialog and open it again, then active it.</p>

<p>To get album art, right click the album art icon, select &#8220;fetch cover&#8221; and wait for right cover downloaded.</p>

<p>The plugin is open sourced under GPL v2, you can grab the code from bitbucket using mercurial:
<em>hg clone http://bitbucket.org/sunng/exailedoubancovers/</em></p>

<p>Some screenshots for you:</p>

<p><img class="alignnone" src="http://farm3.static.flickr.com/2628/4074746549_2398351bef.jpg" alt="" width="500" height="414" /></p>

<p><img class="alignnone" src="http://farm4.static.flickr.com/3512/4075502050_325281d63a_o.png" alt="" width="358" height="375" /></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2009/11/02/lighttpd%E9%80%9A%E8%BF%87fastcgi%E8%BF%90%E8%A1%8Cweb-py%E7%A8%8B%E5%BA%8F/">Lighttpd通过FastCGI运行web.py程序</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-11-02T00:00:00+08:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://webpy.org/" target="_blank">web.py</a>是个很小的python框架，特点就是小，连session都没有实现人家就发布了。前几天KungfuRails大会上他们吹牛说<a href="http://www.sinatrarb.com" target="_blank">Sinatra</a>可以写出世界上最小的Webapp，但是有web.py的化，那个最小至少要加上个“之一”。</p>

<p>Web.py在Lighttpd上通过fastcgi运行的配置，可以在web.py的网站上找到文档：
<a href="http://webpy.org/cookbook/fastcgi-lighttpd">http://webpy.org/cookbook/fastcgi-lighttpd</a></p>

<p>实际我用的时候把静态的index.html用作首页，稍改动一下：
<pre class="brush:plain">server.document-root = "/home/sun/projects/sdostatweb"</pre></p>

<p>server.modules   += ( &#8220;mod_fastcgi&#8221; )<br />
server.modules   += ( &#8220;mod_rewrite&#8221; )</p>

<p>server.port = 4000</p>

<p>mimetype.assign = (<br />
    &#8220;.html&#8221; =&gt; &#8220;text/html&#8221;<br />
)</p>

<p>index-file.names = ( &#8220;index.html&#8221; )</p>

<p>fastcgi.server = ( &#8220;/sdostatweb.py&#8221; =&gt;<br />
(( &#8220;socket&#8221; =&gt; &#8220;/tmp/fastcgi.socket&#8221;,<br />
        &#8220;bin-path&#8221; =&gt; &#8220;/home/sun/projects/sdostatweb/sdostatweb.py&#8221;,<br />
        &#8220;max-procs&#8221; =&gt; 5,<br />
        &#8220;bin-environment&#8221; =&gt; (<br />
        &#8220;REAL_SCRIPT_NAME&#8221; =&gt; &#8220;&#8221;<br />
    ),<br />
        &#8220;check-local&#8221; =&gt; &#8220;disable&#8221;<br />
    ))<br />
)</p>

<p>url.rewrite-once = (<br />
    &#8220;^/$&#8221; =&gt; &#8220;/static/index.html&#8221;,<br />
    &#8220;^/flotr/(.*)$&#8221; =&gt; &#8220;/static/flotr/$1&#8221;,<br />
    &#8220;^/static/(.*)$&#8221; =&gt; &#8220;/static/$1&#8221;,<br />
    &#8220;^/(.*)$&#8221; =&gt; &#8220;/sdostatweb.py/$1&#8221;,</p>

<p>)
另外用fastcgi的方式使用web.py，需要安装flup。</p>

<p>详细的事，可以看看新浪的Tim Yang的优化：
<a href="http://timyang.net/python/python-webpy-lighttpd/">http://timyang.net/python/python-webpy-lighttpd/</a></p>

<p>我之前真不敢相信搜狐Mail是跑在web.py上。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2009/10/28/%E8%8A%A6%E8%8D%9F%E5%92%8C%E6%A1%94%E5%AD%90%E4%BB%AC/">芦荟和桔子们</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-10-28T00:00:00+08:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img class="alignnone" src="http://farm3.static.flickr.com/2585/4052990160_e76583aed9.jpg" alt="" width="500" height="333" /></p>

<p><img class="alignnone" src="http://farm3.static.flickr.com/2772/4052990354_1f83589f87.jpg" alt="" width="500" height="333" /></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2009/10/25/restore-nautilus-to-open-gnome-menu-after-installed-pcmanfm/">Restore Nautilus to Open Gnome Menu After Installed PCManFM</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-10-25T00:00:00+08:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>After installed PCMan File Manager with LXDE,  the gnome &#8220;places&#8221; menu items were opened by PCManFM as default. To switch back to nautilus, follow these steps:
<ol>
	<li>check <em>/usr/share/applications/nautilus-folder-hanlder.desktop</em>
make sure the line &#8221;<em>Exec=nautilus</em>&#8221; is not modified. (There are lots of hack article that teach user to change default file manager by modify this)</li>
	<li>check <em>/usr/share/applications/defaults.list</em>
grep the line &#8220;x-directory&#8221; by
<em>cat /usr/share/applications/defaults.list | grep x-directory </em>
make sure the value was kept as &#8220;nautilus-folder-handler.desktop&#8221;, if not, restore it.<br />
Then grep the line &#8220;inode&#8221; by
<em>cat /usr/share/applications/defaults.list | grep inode</em>
also be sure about the result &#8220;nautilus-folder-handler.desktop&#8221;. if not, restore it again.</li>
	<li>So it must be your own configuration that has been changed. check <em>~/.local/share/applications/defaults.list</em>
grep the two lines described above, it must be changed to &#8220;pcmanfm-folder-handler.desktop&#8221;, so replace them by &#8220;nautilus-folder-handler.desktop&#8221;</li>
</ol>
To check the result, click menu item at once (no restart or logout needed), again, you see the slow file manager&#8230;</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2009/10/24/yan-captcha-service/">Yan Captcha Service</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-10-24T00:00:00+08:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I&#8217;d like to announce my recent works, a project called Yan Captcha Service written in Java which is aimed to provide whole solutions of captcha for your websites. It will be very easy to use the service because 1. interfaces are based on plain http url; 2. different kinds of usage are supported to fit your requirements; 3. the architecture is open so you can add your own solid implementation of captcha; 4. less coupling with your system. And designed for scalability, currently, it applies JGroups to share sessions (memcached support will be added soon), thus you can setup a cluster for the service.</p>

<p>As you may know, the open-source project is split from my current work-time project because it is more closed to my idea. However, soon we will have the product opened to our thousands (millions ?) of users. I can gain feedback from the challenge and improve the open-source edition.</p>

<p>The code is maintained by open-source scm, mercurial (also known as hg). The project is now hosted on <a href="http://bitbucket.org/sunng/yan/">bitbucket.org</a>. You can clone the code to local via:
<em>$ hg clone https://sunng@bitbucket.org/sunng/yan/</em></p>

<p>To build the project, run this command in root of project directory:
<em>mvn install</em></p>

<p>To run in a develop environment:
<em>mvn jetty:run</em></p>

<p><a href="http://bitbucket.org/sunng/yan/issues/?status=new&amp;status=open" target="_blank">Issue reporting</a> and patches are always welcomed.</p>

<p>Check the wiki pages for more information about the project:
<a href="http://bitbucket.org/sunng/yan/wiki/Home">http://bitbucket.org/sunng/yan/wiki/Home</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2009/10/22/open-source-charting-libraries-in-javascript/">Open Source Charting Toolkits in JavaScript</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-10-22T00:00:00+08:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>项目的下一阶段，需要做一些数据展现方面的工作，处于对Adobe产品的抵触情绪，我个人还是倾向于用JavaScript来完成。今天找了几个画Chart的库，比较一下功能和编程接口的使用，为接下来的开发做一些准备。
<h3>dojox.charting</h3>
(BSD License)<br />
没什么悬念，第一个想到的就是曾经用过的<a href="http://dojotoolkit.org/" target="_blank">dojo</a>。之前实习时候用dojo画chart也算是积累了一些心得。dojox.charting的最主要优点是编程接口完善、全面，可以配置的项目很多，接口易于编程，易于动态地生成、操作Chart。而另一方面最主要的问题就是文档比较匮乏，不了解的人可能问了，doc.dojotoolkit.org好强大，怎么会文档匮乏呢。其实是dojo和<a href="http://mootools.net">mootools</a>类似，都很喜欢用option object来传递可选参数，但是这些option object在文档中没有任何涉及，很多关键的属性都在其中但是却没有办法查到，算是美中一大不足。
<pre class="brush:html">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;</pre></p>

<p>&lt;html xmlns=&#8221;http://www.w3.org/1999/xhtml&#8221;&gt;</p>

<p>&lt;head&gt;</p>

<p>	&lt;script src=&#8221;dojo-release-1.3.2/dojo/dojo.js&#8221; djConfig=&#8221;isDebug: true&#8221;&gt;&lt;/script&gt;</p>

<p>	&lt;title&gt;Dojo&lt;/title&gt;</p>

<p>	&lt;script type=&#8221;text/javascript&#8221;&gt;</p>

<p>		dojo.require(&#8220;dojox.charting.Chart2D&#8221;);</p>

<p>	&lt;/script&gt;</p>

<p>&lt;/head&gt;</p>

<p>&lt;body&gt;</p>

<p>	&lt;h1&gt;Dojox.charting&lt;/h1&gt;</p>

<p>	&lt;div id=&#8221;charting&#8221; style=&#8221;width:400px; height:250px;&#8221;&gt;</p>

<p>	&lt;/div&gt;</p>

<p>	&lt;script type=&#8221;text/javascript&#8221;&gt;</p>

<p>		（function charting(){</p>

<p>			dojo.empty(&#8220;charting&#8221;);</p>

<p>			var data = [2,4,5,7,7,4,4,7];</p>

<p>			var chart = new dojox.charting.Chart2D(&#8220;charting&#8221;);</p>

<p>			chart.addPlot(&#8220;default&#8221;, {type: &#8220;Lines&#8221;, markers: true, shadows: {dw:2, dy:2, dx:2}});</p>

<p>			chart.addPlot(&#8220;additional&#8221;, {type: &#8220;Areas&#8221;});</p>

<p>			chart.addPlot(&#8220;other&#8221;, {type: &#8220;ClusteredColumns&#8221;})</p>

<p>			chart.addAxis(&#8220;x&#8221;);</p>

<p>			chart.addAxis(&#8220;y&#8221;, {vertical: true, min:0, max: 10});</p>

<p>			chart.addSeries(&#8220;Testing Data 1&#8221;, data);</p>

<p>			chart.addSeries(&#8220;Average&#8221;, dojo.map(data, function(it){return (Math.sin(it)+Math.random())*4}), {</p>

<p>				fill: &#8220;rgba(145, 213, 100, 0.5)&#8221;, plot:&#8221;additional&#8221;</p>

<p>			});</p>

<p>			chart.addSeries(&#8220;All Random&#8221;, dojo.map(data, function(it){return (Math.random()*5)}), {</p>

<p>				plot: &#8220;other&#8221;, fill: &#8220;#AEC6E2&#8221;, stroke:{color:&#8221;#333&#8221;, width:1}</p>

<p>			});</p>

<p>			chart.render();</p>

<p>		}）();</p>

<p>	&lt;/script&gt;</p>

<p>&lt;/body&gt;</p>

<p>&lt;/html&gt;
<h3>Protovis</h3>
(BSD License)
<a href="http://vis.stanford.edu/protovis/" target="_blank">Protovis</a>，看域名就知道是斯坦福的项目，Protovis是在prototype基础上，不仅有charting的功能，还包括其他可视化方法的实现。看了Demo会发现它真的很不错，不过Protovis的本意似乎只是借助浏览器的图形功能实现可视化，它并没有提供超出可视化范畴的其他东西，甚至看过实例的代码你会发现，作者是不折不扣的函数式编程和链式方法的爱好者，Protovis的代码算是出神入化了，如果你想看看学术的JavaScript是如何写的，那就看看这个发表了论文的JavaScript库吧。<br />
看起来是很出神入化，可是这样的编程接口如果要用在动态的数据展现上，实在是难以想象。况且，pv.Panel居然没有传入dom对象的接口，无从控制chart的生成位置。说白了，Protovis并不是一个满足项目需要的Library，不过它的功能和代码还是值得多看几眼的。
<pre class="brush:html">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;</pre></p>

<p>&lt;html xmlns=&#8221;http://www.w3.org/1999/xhtml&#8221;&gt;</p>

<p>&lt;head&gt;</p>

<p>	&lt;script src=&#8221;protovis-3.1/protovis-r3.1.js&#8221;&gt;&lt;/script&gt;</p>

<p>&lt;/head&gt;</p>

<p>&lt;body&gt;</p>

<p>	&lt;div id=&#8221;page&#8221;&gt;</p>

<p>		&lt;h1&gt;Protovis&lt;/h1&gt;</p>

<p>		&lt;div style=&#8221;border:1px #CCC solid;&#8221;&gt;</p>

<p>			&lt;script type=&#8221;text/javascript&#8221;&gt;</p>

<p>				var width = 300;</p>

<p>				var height = 225;</p>

<p>				var data = [1,2,3,4,6,7,5,8,9];</p>

<p>				var dataMax = data[0];</p>

<p>				for(var i=1; i&lt;data.length; i++){</p>

<p>					dataMax = dataMax &gt; data[i] ? dataMax : data[i];</p>

<p>				}</p>

<p>				var x = pv.Scale.linear(0, dataMax).range(0, width);</p>

<p>				var y = pv.Scale.ordinal(pv.range(10)).splitBanded(0, height, 0.9);</p>

<p>				var charting = new pv.Panel();</p>

<p>				charting.width(width).height(height).left(20).top(20);</p>

<p>				var bar = charting.add(pv.Bar);</p>

<p>				bar.data(data).top(function() y(this.index)).height(y.range().band).left(0).width(x);</p>

<p>				bar.anchor(&#8220;center&#8221;).add(pv.Label)</p>

<p>					.textStyle(&#8220;white&#8221;)</p>

<p>					.textAlign(&#8220;center&#8221;)</p>

<p>					.text(function(d) d.toFixed(1));</p>

<p>				charting.add(pv.Rule)</p>

<p>					.data(x.ticks())</p>

<p>					.left(function(d) Math.round(x(d)) - .5)</p>

<p>					.strokeStyle(function(d) d ? &#8220;rgba(255,255,255,.3)&#8221; : &#8220;#000&#8221;)</p>

<p>				.add(pv.Rule)</p>

<p>					.bottom(0)</p>

<p>					.height(5)</p>

<p>					.strokeStyle(&#8220;#C00&#8221;)</p>

<p>					.anchor(&#8220;bottom&#8221;).add(pv.Label)</p>

<p>					.text(function(d) d);</p>

<p>				charting.render();</p>

<p>			&lt;/script&gt;</p>

<p>		&lt;/div&gt;</p>

<p>	&lt;/div&gt;</p>

<p>&lt;/body&gt;</p>

<p>&lt;/html&gt;
<h3>Flotr</h3>
(MIT License)<br />
不同于上面两个库通过SVG绘图，<a href="http://solutoire.com/category/flotr/" target="_blank">Flotr</a>是用canvas api来完成绘制的。与dojo相比，Flotr的API比较简单，主要只有一个Flotr.draw方法，可以传入三个参数：目标DOM对象，数据和绘图选项。和dojo不同，Flotr的文档里关于这个option object有非常明确的文档。另外强大的是Flotr还提供了一些交互的功能，支持事件绑定。
<pre class="brush:html">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;</pre></p>

<p>&lt;html xmlns=&#8221;http://www.w3.org/1999/xhtml&#8221;&gt;</p>

<p>&lt;head&gt;</p>

<p>	&lt;script src=&#8221;flotr-0.2.0-alpha/flotr/lib/prototype-1.6.0.2.js&#8221;&gt;&lt;/script&gt;</p>

<p>	&lt;script src=&#8221;flotr-0.2.0-alpha/flotr/flotr-0.2.0-alpha.js&#8221;&gt;&lt;/script&gt;</p>

<p>	&lt;title&gt;Flotr&lt;/title&gt;</p>

<p>	&lt;script type=&#8221;text/javascript&#8221;&gt;</p>

<p>	&lt;/script&gt;</p>

<p>&lt;/head&gt;</p>

<p>&lt;body&gt;</p>

<p>	&lt;h1&gt;Flotr&lt;/h1&gt;</p>

<p>	&lt;div id=&#8221;charting&#8221; style=&#8221;width:400px; height:250px;&#8221;&gt;</p>

<p>	&lt;/div&gt;</p>

<p>	&lt;script type=&#8221;text/javascript&#8221;&gt;</p>

<p>		(function d(){</p>

<p>			var series1 = {data: (function(){</p>

<p>				var d = [];</p>

<p>				for(var i=0; i&lt;10; i+=0.5){</p>

<p>					d.push([i, Math.random()-0.5+Math.sin(i)*3]);</p>

<p>				}</p>

<p>				return d;</p>

<p>			})(), label:&#8221;d1&#8221;, lines:{fill:true}};</p>

<p>			var series2 = {data: (function(){</p>

<p>				var d = [];</p>

<p>				for(var i=0; i&lt;10; i+=0.5){</p>

<p>					d.push([i, (Math.random()-0.5)*2+Math.cos(i)*2]);</p>

<p>				}</p>

<p>				return d;</p>

<p>			})(), label: &#8220;s2&#8221;, points:{show:true}, lines:{show:true}};</p>

<p>			Flotr.draw($(&#8220;charting&#8221;), [series1, series2], {</p>

<p>				legend: {position :&#8221;se&#8221;},</p>

<p>				yaxis: {min: -3.5, max:3.5}</p>

<p>			});</p>

<p>		})();</p>

<p>	&lt;/script&gt;</p>

<p>&lt;/body&gt;</p>

<p>&lt;/html&gt;
此外，还有一个与Flotr很类似的<a href="http://www.deensoft.com/lab/protochart/">Protochart</a>，后者的网站上写自己是motivated by Flotr，不过我很难想象功能几乎相同是如何motivated的。
<h3>MilkChart</h3>
(Apache License 2.0)
<a href="http://code.google.com/p/milkchart/">MilkChart</a>是一个建立在Mootools上的Charting库，采用canvas api绘图。它的特点是把HTML Table的数据绘制成Chart，如果场景允许，倒是省去了不少构建数组的麻烦。这个项目目前规模还不大，并且在作者积极的开发中，可以参考它的Wiki获得详细的使用方法。</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/blog/page/32/">&larr; Older</a>
    
    <a href="/blog/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/blog/page/30/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>About Me</h1>
  <p>Ning Sun. Programmer. Map enthusiast. (<a href="http://sunng.info/">more</a>)</p>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/blog/2014/07/01/extend-linux-ephemeral-ports/">扩展 Linux Ephemeral 端口限制</a>
      </li>
    
      <li class="post">
        <a href="/blog/blog/2014/06/09/grouping-in-slacker-0-dot-12/">Slacker Cluster 0.12: Grouping</a>
      </li>
    
      <li class="post">
        <a href="/blog/blog/2014/05/27/fork-join-in-papaline/">Fork-Join in Papaline</a>
      </li>
    
      <li class="post">
        <a href="/blog/blog/2014/04/20/concurrent-pipeline-with-core-async/">Papaline: Concurrent Pipeline With core.async</a>
      </li>
    
      <li class="post">
        <a href="/blog/blog/2014/04/20/rust-concurrent-made-safely/">Rust语言：安全的并发</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/sunng87">@sunng87</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'sunng87',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/blog/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>On Delicious</h1>
  <div id="delicious"></div>
  <script type="text/javascript" src="http://feeds.delicious.com/v2/json/classicing?count=3&amp;sort=date&amp;callback=renderDeliciousLinks"></script>
  <p><a href="http://delicious.com/classicing">My Delicious Bookmarks &raquo;</a></p>
</section>




  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Sun Ning -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'sunng-blog';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
