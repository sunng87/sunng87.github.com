<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>Here Comes the Sun</title>
        <link rel="stylesheet" href="./theme/css/main.css" />
        <link href="https://sunng.info/blog/atom.xml" type="application/atom+xml" rel="alternate" title="Here Comes the Sun Atom Feed" />

        <!--[if IE]>
            <script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="./">Here Comes the Sun </a></h1>
                <nav><ul>
                    <li><a href="./category/misc.html">misc</a></li>
                </ul></nav>
        </header><!-- /#banner -->

                <section id="content" class="body">
                    <ol id="posts-list" class="hfeed" start="4">
            <li><article class="hentry">
                <header>
                    <h1><a href="./keep-alive.html" rel="bookmark"
                           title="Permalink to Keep-Alive">Keep-Alive</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2012-06-02T00:00:00+08:00">
                Published: Sat 02 June 2012
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="./author/ning-sun.html">Ning Sun</a>
        </address>
<p>In <a href="./category/misc.html">misc</a>.</p>

</footer><!-- /.post-info -->                <ul>
<li>自话
tags:</li>
<li>Life
published: true
comments: true</li>
</ul>
<hr />
<p><p>史无前例，上个月只写了一篇blog，再加上网站遭遇认证很多地方都访问不了，故而有必要keep alive一下，该reconnect的请自觉重连。</p></p>
<p>从家里出来，再次跑到北京来，就做好了艰苦卓绝的思想准备。现在的工作节奏，和2010年春天在盛大在线的时候差不多。那时一腔热血，也没什么经验，做什么事都心里没底。当然也是那段时间学到的东西最多，人生就是这样，熬过一个最困难的时候，总会有巨大的收获（如果没有收获说明还没熬过去，下同）。时过境迁，现在的情况有了巨大的不同，比如看<a href="http://tech.sina.com.cn/i/2012-05-26/03317171784.shtml" target="_blank">这里</a>。曾经没日没夜的奋斗的项目，最后烟消云散仿佛都不存在过。</p>

<p>人最大的瓶颈是时间，时间不可逆，挥霍掉就没有了。为了能有口饭吃，大部分时间还得拿自己的时间去换别人的金钱。如果这个时间能有合理的回报或是各取所需最好，如果这个工作自己也认同倒也不错。如果是纯粹的时间换金钱（所谓工作毕竟是工作），那就难免悲伤了。所以看到<a href="http://www.gsb.stanford.edu/news/research/aaker_happiness_2011.html" target="_blank">这样</a>一篇文章，还是觉得你很有必要快速浏览一下：
<ul>
    <li>Spend time with ...</li></ul></p>
                <a class="readmore" href="./keep-alive.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="./jia-ru-liao-mei-wei-shu-qian.html" rel="bookmark"
                           title="Permalink to 加入了美味书签">加入了美味书签</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2012-05-11T00:00:00+08:00">
                Published: Fri 11 May 2012
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="./author/ning-sun.html">Ning Sun</a>
        </address>
<p>In <a href="./category/misc.html">misc</a>.</p>

</footer><!-- /.post-info -->                <ul>
<li>自话
tags:</li>
<li>Beijing</li>
<li>meifm
published: true
comments: true</li>
</ul>
<hr />
<p><p>距离上次更新已经有大半个月的时间了，最近一直忙着搬家和适应新环境。现在我又跑到北京来工作，好在这次终于不是在上地。我记得在写工作第三年的愿望的时候，有一条就是能加入一个优秀的小团队。那么目前看来一切顺利，美味书签这样的团队就是我一直希望能找到的。</p></p>
<p>我们的团队是Youtube创始人陈士骏的<a href="http://avos.com" target="_blank">AVOS公司</a>中国分支，中国团队由江宏带领，目前有20人，包括技术（前端、后端、移动），编辑等等。我们的团队网站上一一介绍了每个成员，我就不重复了。</p>

<p>在工作上，眼下最好的事情，是我终于可以利用自己喜爱和擅长的技术，来主导一些系统的开发。我们会尽可能地用热爱的语言（毫无疑问是clojure）开发，这想起来就让人兴奋。我这个人对技术还是有一些洁癖和偏执的。这样虽然路漫漫坑无数，但是收获一定不小，过程也在把握中，青春岁月不可再蹉跎了。</p>

<p>最后欢迎大家都来用<a href="http://mei.fm" target="_blank">我们的产品</a>。</p>
                <a class="readmore" href="./jia-ru-liao-mei-wei-shu-qian.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="./slacker-080.html" rel="bookmark"
                           title="Permalink to Slacker 0.8.0">Slacker 0.8.0</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2012-04-22T00:00:00+08:00">
                Published: Sun 22 April 2012
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="./author/ning-sun.html">Ning Sun</a>
        </address>
<p>In <a href="./category/misc.html">misc</a>.</p>

</footer><!-- /.post-info -->                <ul>
<li>ANN
tags:</li>
<li>clojure</li>
<li>github</li>
<li>project</li>
<li>slacker
published: true
comments: true</li>
</ul>
<hr />
<p><p>A new release 0.8.0 of <a href="https://github.com/sunng87/slacker">slacker</a> has been pushed to clojars. Let's go through the changes in this version.</p></p>
<p><h3>Clojure 1.3 compatible</h3>
Slacker finally landed on clojure 1.3. It takes advantages of performance in 1 ...</p>
                <a class="readmore" href="./slacker-080.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="./visualizing-openstreetmap-nanjing-contribution.html" rel="bookmark"
                           title="Permalink to Visualizing OpenStreetMap Nanjing Contribution">Visualizing OpenStreetMap Nanjing Contribution</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2012-04-20T00:00:00+08:00">
                Published: Fri 20 April 2012
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="./author/ning-sun.html">Ning Sun</a>
        </address>
<p>In <a href="./category/misc.html">misc</a>.</p>

</footer><!-- /.post-info -->                <ul>
<li>把戏
tags:</li>
<li>Nanjing</li>
<li>OpenStreetMap</li>
<li>visualization
published: true
comments: true</li>
</ul>
<hr />
<p><p>早上在prismatic上看到mapbox的一篇<a href="http://mapbox.com/blog/how-to-map-contributions-openstreetmap/" target="_blank">博客</a>，介绍通过TileMill可视化OSM的贡献者，非常酷。于是我在南京的地图上也做了一个这样的可视化。</p></p>
<p><img src="http://i.imgur.com/U2yXK.png" alt="" /></p>

<p>一个详细的大图在<a href="http://i.imgur.com/YnULm.png" target="_blank">这里</a>。虽然只做了南京的五个主要贡献者，基本上涵盖了大部分数据。</p>

<p>图例就不专门输出了<br />
[user = 'Sunng'] { marker-fill: @magenta;} <br />
[user = 'fuwuyuan'] { marker-fill: @blue;}<br />
[user = 'sinopitt'] {marker-fill: @yellow;}<br />
[user = 'larryy'] {marker-fill: @green;}<br />
[user = 'zhengz'] {marker-fill: @red;}</p>

<p>MapBox家的东西真的非常酷，这家的技术以nodejs为主，围绕osm开发了不少产品。最近比较大的新闻，比如4sq转到osm上，其实就是转到这家的osm服务上。有兴趣你可以关注一下！
<img src="http://i.imgur.com/Hum2r.png" alt="" /></p>
                <a class="readmore" href="./visualizing-openstreetmap-nanjing-contribution.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="./duo-xian-cheng-fu-wu-qi.html" rel="bookmark"
                           title="Permalink to 多线程服务器">多线程服务器</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2012-04-12T00:00:00+08:00">
                Published: Thu 12 April 2012
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="./author/ning-sun.html">Ning Sun</a>
        </address>
<p>In <a href="./category/misc.html">misc</a>.</p>

</footer><!-- /.post-info -->                <ul>
<li>手艺
tags:</li>
<li>NIO</li>
<li>programming
published: true
comments: true</li>
</ul>
<hr />
<p><p>写了挺长时间网络程序了，有些事到最近才弄明白，记录一下。</p></p>
<p>写一个高性能的服务器，传统的BIO方式基本上已经被淘汰了，很难获得理想的性能。所以现在都是以事件驱动的方式来写，在Linux上用epoll,Java平台上就是NIO。再向上，有一些包装的库，比如twisted比如libevent比如Java上的Netty。</p>

<p>Netty的server需要至少两组线程，BossPool和WorkerPool,。前者负责accept，后者负责r/w。通常的例子里，这就是仅有的两组线程。用户在框架之上的业务逻辑，写在handler里，以单线程的方式运行在worker线程上。</p>

<p>这样的方式在很多例子里很普遍。但是如果handler里的业务逻辑比较复杂，尤其是IO的等待过长(比如查询数据库)，就会由于在handler上阻塞的时间过长，导致服务器读写的效率下降。所以通常是不能在这样环境下的handler里写IO阻塞的代码。</p>

<p>解决这个问题，一种方式是多线程，一种是全异步化。后者最典型的例子就是nodejs，坦白说编程模型非常复杂，对开发者要求较高。一种相对简单的办法，就是以多线程的方式，增加CPU的利用效率，来平衡IO阻塞带来的影响。IO等待时间的比重越大，线程数就可以陪得越高。牺牲一些sy的CPU时间 ...</p>
                <a class="readmore" href="./duo-xian-cheng-fu-wu-qi.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>
                </ol><!-- /#posts-list -->
<p class="paginator">
        <a href="./index8.html">&laquo;</a>
    Page 9 / 77
        <a href="./index10.html">&raquo;</a>
</p>
                </section><!-- /#content -->
        <section id="extras" class="body">
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="https://sunng.info/blog/atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                            <li><a href="https://github.com/sunng87">Github</a></li>
                            <li><a href="https://twitter.com/sunng">Twitter</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>