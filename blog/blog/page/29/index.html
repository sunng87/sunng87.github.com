
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>车水马龙</title>
  <meta name="author" content="Sun Ning">

  
  <meta name="description" content="给Yan的验证码图片服务做了压力测试。测试环境： Intel Xeon 3.00GHz 4核 内存2G Red Hat Enterprise Linux AS release 4 (Nahant Update 7) Jetty 6 / JDK 6 Jetty采用默认配置 maxThreads &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://sunng87.github.io/blog//blog/page/29">
  <link href="/blog/favicon.png" rel="icon">
  <link href="/blog/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/blog/atom.xml" rel="alternate" title="车水马龙" type="application/atom+xml">
  <script src="/blog/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/blog/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/blog/">车水马龙</a></h1>
  
    <h2>here comes the sun</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/blog/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:sunng87.github.io/blog/" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/blog/">Blog</a></li>
  <li><a href="/blog/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2009/12/25/load-test-on-yan/">Load Test on Yan</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-12-25T00:00:00+08:00" pubdate data-updated="true">Dec 25<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>给Yan的验证码图片服务做了压力测试。测试环境：
<ul>
	<li>Intel Xeon 3.00GHz 4核</li>
	<li>内存2G</li>
	<li>Red Hat Enterprise Linux AS release 4 (Nahant Update 7)</li>
	<li>Jetty 6 / JDK 6</li>
</ul>
Jetty采用默认配置 maxThreads 200。</p>

<p>测试工具：ab (Apache Bench)</p>

<p>分别用10/50/100/200/500/1000并发用户，每个用户请求100次进行测试。结果如下：</p>

<p><!--   		BODY,DIV,TABLE,THEAD,TBODY,TFOOT,TR,TH,TD,P { font-family:"宋体"; font-size:x-small } --></p>

<p><!--   		BODY,DIV,TABLE,THEAD,TBODY,TFOOT,TR,TH,TD,P { font-family:"宋体"; font-size:x-small } -->
<table border="0" cellspacing="0" frame="VOID" rules="NONE"><colgroup> <col width="161" /> <col width="159" /> <col width="167" /> <col width="169" /> <col width="160" /> <col width="145" /> <col width="136" /> </colgroup>
<tbody>
<tr>
<td align="LEFT"></td>
<td align="RIGHT"><span style="font-family: Arial;">10</span></td>
<td align="RIGHT"><span style="font-family: Arial;">50</span></td>
<td align="RIGHT"><span style="font-family: Arial;">100</span></td>
<td align="RIGHT"><span style="font-family: Arial;">200</span></td>
<td align="RIGHT"><span style="font-family: Arial;">500</span></td>
<td align="RIGHT"><span style="font-family: Arial;">1000</span></td>
</tr>
<tr>
<td align="LEFT"><span style="font-family: Arial;">Requests per second</span></td>
<td align="RIGHT"><span style="font-family: Arial;">487.11</span></td>
<td align="RIGHT"><span style="font-family: Arial;">472.09</span></td>
<td align="RIGHT"><span style="font-family: Arial;">442.74</span></td>
<td align="RIGHT"><span style="font-family: Arial;">421.63</span></td>
<td align="RIGHT"><span style="font-family: Arial;">408.11</span></td>
<td align="RIGHT"><span style="font-family: Arial;">326.12</span></td>
</tr>
<tr>
<td align="LEFT"><span style="font-family: Arial;">Time per request</span></td>
<td align="RIGHT"><span style="font-family: Arial;">2.05</span></td>
<td align="RIGHT"><span style="font-family: Arial;">2.12</span></td>
<td align="RIGHT"><span style="font-family: Arial;">2.26</span></td>
<td align="RIGHT"><span style="font-family: Arial;">2.37</span></td>
<td align="RIGHT"><span style="font-family: Arial;">2.45</span></td>
<td align="RIGHT"><span style="font-family: Arial;">3.07</span></td>
</tr>
<tr>
<td align="LEFT"><span style="font-family: Arial;">Transfer rate</span></td>
<td align="RIGHT"><span style="font-family: Arial;">987.91</span></td>
<td align="RIGHT"><span style="font-family: Arial;">955.54</span></td>
<td align="RIGHT"><span style="font-family: Arial;">896.85</span></td>
<td align="RIGHT"><span style="font-family: Arial;">854.31</span></td>
<td align="RIGHT"><span style="font-family: Arial;">826.25</span></td>
<td align="RIGHT"><span style="font-family: Arial;">660.45</span></td>
</tr>
</tbody>
</table>
﻿<img class="alignnone" src="http://farm3.static.flickr.com/2677/4212622846_f6023f9b40_o.png" alt="" width="358" height="334" /></p>

<p>目前对每个请求独立使用JDK的awt实时绘图，吞吐量可以达到400以上，如果稍稍优化一下Jetty的配置，性能还有一定的提升空间。这个结果还是不错的。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2009/12/24/java%E5%B5%8C%E5%85%A5%E5%BC%8F%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E9%80%9F%E5%BA%A6%E5%AF%B9%E6%AF%94/">Java嵌入式数据库的速度对比</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-12-24T00:00:00+08:00" pubdate data-updated="true">Dec 24<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Yan的APIKEY一直是用嵌入式的数据库存储的，最初使用的是hsqldb，最近又添加了H2和Derby的支持，基本上囊括了所有开源的Java嵌入式数据库。实现多了自然需要挑选、比较一下。</p>

<p>数据库特性的比较，H2的网站上有很好的Matrix，一目了然<br />
http://www.h2database.com/html/features.html#comparison</p>

<p>关于速度的比较，今天做了一个简单的测试。</p>

<p>分别从derby / H2 / hsqldb中取出10 、100、1000条数据，循环100000次，比较耗时，如下：</p>

<p><img class="alignnone" src="http://farm3.static.flickr.com/2665/4210754380_5cb4d7b0a8_o.png" alt="" width="376" height="394" /></p>

<p>三者的速度差距非常明显，hsqldb远快于其他两个。</p>

<p>而在10、100、1000条记录的索引上查询，并取出指定记录呢，同样是100000次，如下：</p>

<p><img class="alignnone" src="http://farm3.static.flickr.com/2716/4210754396_e52acc7e69_o.png" alt="" width="376" height="394" /></p>

<p>再索引上查询，速度受记录数量的影响非常微弱了。但是hsqldb还是远快于其他二者，有趣的是derby的速度要略微快于H2.</p>

<p>根据这样的结果，在Yan的应用中，hsqldb还是最理想的实现。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2009/12/24/be-with-you/">Be With You</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-12-24T00:00:00+08:00" pubdate data-updated="true">Dec 24<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>今天下班骑车到高斯路时，突然路边奔出一只小狗跟着我的自行车一起跑。小狗挺干净，出现在这种工业区人不多的路上倒是挺让人诧异。我开始放慢速度，让它跟着我不至于太辛苦。可是它还足够顽皮，一会跑在左边，一会在右边，好像是知道今天过节一样，欢实得很。不过我对路中间不时经过的汽车有所顾虑，有意得向路边靠，打算把它挤到路涯边，这样安全一些。</p>

<p>大约是嫌我速度太慢了，一会后面又上来一个骑自行车的人，小狗顿时起了劲，蹦达蹦达地追了上去。那速度大概是它向往的吧，我在后面看着，直到他们一前一后，过了马路，我从另一个方向回家了。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2009/12/23/%E9%82%A3%E5%B9%B4%E6%A6%95%E6%A0%91%E4%B8%8B/">那年榕树下</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-12-23T00:00:00+08:00" pubdate data-updated="true">Dec 23<span>rd</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>有的朋友看到这标题，肯定感叹，哎呀妈呀，这哥们也堕落了，开始写软文了。好吧，就算是软文吧，我决定东拉西扯地码一些字，不同于上周五的工作指标，这次完全是自觉自愿的。</p>

<p>榕树下，25号，重新上线。</p>

<p>我接触互联网稍微晚了一些，2002年冬天周五的一个下午（不出意外是2002年12月20号），家里终于接上了网线。我打开的第一个网站是搜狐，第二个是华军，第三个不记得了。那时已经听说了榕树下，途径大约是每季度一期的贝塔斯曼广告和天天都有的广播小说节目。</p>

<p>贝塔斯曼当时似乎和榕树下还是合作关系，后来收购了榕树下，这也是榕树的不幸。每一期的目录都会有热门的网络小说，那时还都是以榕树下的为主。我记得曾经买过陆幼青的书，红极一时的。</p>

<p>广播每晚十点左右多会有读小说的节目，安妮宝贝的文字常常是DJ们的偏好。到现在具体的内容早就不记得，但是暖暖的感觉还是值得常常温故。</p>

<p>这是我对互联网最初的认识，虽然我那时也不看网络小说，但在印象里，网络小说是互联网生活很重要的一部分。现在要是问我知名的作者我可能几乎都说不上来，但是看到今天网站上列出来那些名字，诸如李寻欢、安妮、宁财神、慕容雪村这样的，还是有一分陌生的熟悉。</p>

<p>有一天，daf同学说她看小说，我说我只知道榕树下。于是顺手搜到已经忘记了的网址，漫长的载入过程还是以一个空白的窗口告终。这些年这种场面也见得多了，没有什么大惊小怪的：大概是太久远了吧。</p>

<p>今天上午看路金波的博客，突然发现榕树下被收购的新闻，转而打开网站，看到了这个让人想流眼泪的<a href="http://www.rongshu.com" target="_blank">页面</a>和这个让人想擦眼泪的<a href="http://58.215.39.134/" target="_blank">留言板</a>。人们对于榕树下的情感，绝不是现在充斥着肾上腺素的起点之流可以相比的。我说这是我加入以来公司做得最好的一件事情，也希望从此榕树下对大家不再只是一些回忆而已。</p>

<p><blockquote><h3>那年榕树下</h3>
词:叶风  曲:马条  演唱:马条<br />
那年榕树下   我们肩头披着细碎阳光<br />
总会有个枝头  将青春安放<br />
那年榕树下  我们亲手种下快乐忧伤<br />
可以要风穿过发梢的那一种飞扬<br />
榕树下  那年萤火虫一样飞舞盘旋<br />
每道光的背后是怎样的世界<br />
榕树下  那年谁其实都在谁的身边<br />
闭上眼的云端 却是秋千<br />
&#8230;&#8230;</blockquote></p>

<p>那年榕树下   我们肩头披着细碎阳光<br />
总会有个枝头  将青春安放<br />
那年榕树下  我们亲手种下快乐忧伤<br />
可以要风穿过发梢的那一种飞扬<br />
榕树下  那年萤火虫一样飞舞盘旋<br />
每道光的背后是怎样的世界<br />
榕树下  那年谁其实都在谁的身边<br />
闭上眼的云端 却是秋千<br />
&#8230;&#8230;<br />
&#8230;&#8230;<br />
榕树下  那年萤火虫一样飞舞盘旋<br />
每道光的背后是怎样的世界<br />
榕树下  那年谁其实都在谁的身边<br />
闭上眼的云端 却是秋千<br />
&#8230;&#8230;<br />
也许只字片语   一个不经意的标点  都能送给曾经些许温暖<br />
&#8230;&#8230;<br />
&#8230;&#8230;</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2009/12/22/%E4%B8%8A%E6%B5%B7%E5%9B%BE%E4%B9%A6%E9%A6%86/">上海图书馆</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-12-22T00:00:00+08:00" pubdate data-updated="true">Dec 22<span>nd</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>发现南图的资源很不错之后就想着到了上海以后要办一张借书证，眼看住这半年了，险些忘了这件事。上上周六去办证不料比截止时间晚了三分钟，白白跑了一趟。上周六正好约samson去，终于一切顺利。</p>

<p>办证的系统很强大，我第一次见识了二代身份证的高级功能。读卡器可以直接读取身份证里的相应信息，简化填申请表的过程。普通外借功能只需要一年100元押金即可，没有额外的收费。一次可以借5本书，还书的期限是4周。</p>

<p>比较遗憾的是发现在衡山路附近的上图的外借馆非常小，可选的书相对也少。计算机类的书架大约有两个，这个数量和南图是差不多的，但是长度远远没有南图的长，就是说比起南图的外借馆这个规模实在是很可怜。除去一些初级的、质量较低的书，想要刨出理想的计算机图书还是很难的，考虑到这图书馆serve着如此大的一个城市，这也是很正常的，恐怕真要看准时机才能找到目标。</p>

<p>幸运的是这次借到了一直没舍得买的《Unix编程艺术》，当时看到它躺在书架上时几乎是直接抢过来抓在手里的，生怕被别人捷足先登。另外找到一本Jolt获奖的《Code Quality》的译本，也是没翻先拿在手上再说。还有一本《空间数据库》是早先想买但是各大网站纷纷缺货的书，现在拿到有点物是人非的感觉。而另外一本CSS的书是拿回来用来放松的。</p>

<p>临走的时候还拿了一本IBM郭士纳的自传，想来咱也曾经蓝过｜｜｜</p>

<p>有意思的是借书的时候还被搭讪要名片。我就想起年初在南图借书的时候也有意无意地看周围的人手上拿的书，借此推断一个人的技术和背景。</p>

<p>从上图坐1号线一站到常熟路换新开的7号线回张江还是非常方便的，可以避开人多的人民广场站。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2009/12/21/use-yan-in-ruby-web-application/">Using Yan in Ruby Web Application</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-12-21T00:00:00+08:00" pubdate data-updated="true">Dec 21<span>st</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I will show you the usage of Yan captcha service. In this tutorial, it&#8217;s based on a simple ruby web application of the Sinatra web framework.</p>

<p>Before we start to use the service, it is necesary to get Yan running. Download the code from <a href="http://bitbucket.org/sunng/yan/" target="_blank">the project page</a>, then build and run it with maven:
<em>mvn jetty:run</em></p>

<p>To enable the application to use Yan, we have to register our application to get an API Key. If you use Yan 0.3, there is a secret registration page at <em>http://localhost:8080/yan/reg.jsp</em> The page is protected by HTTP Basic Authentication, the username and password are store in &#8216;realm.properties&#8217; which is considered to locate in the root directory. Open the file you can see the plain text username and password. If you are running the latest development version, there is no long any UI for API Key creation, but restful interface. This won&#8217;t be hard to you, pickup your tools such as curl or poster (a firefox extension) to send a HTTP request. Take curl as example, do it like this:
<em>curl -X PUT &#8220;http://localhost:8080/yan/apikey/&#8221; -d &#8220;SinatraTestApp&#8221; -u &#8220;username:password&#8221;</em></p>

<p>If it works, you will get a line of json:
<em>{&#8220;apikey&#8221;:&#8221;b251b0dc2eed31cac38555b61d4fa6a453923bfd&#8221;,&#8221;appName&#8221;:&#8221;SinatraTestApp&#8221;}</em>
Save this apikey.</p>

<p>Sinatra is generally considered to be the world&#8217;s lightest and smallest web framework. And our application is rather simple. Just check the code:
<pre class="brush:ruby">require "rubygems"
require "sinatra"
require "net/http"
require "yaml"</pre></p>

<p>apikey=&#8217;b251b0dc2eed31cac38555b61d4fa6a453923bfd&#8217;</p>

<p>get &#8216;/&#8217; do<br />
	conn = Net::HTTP.new(&#8216;localhost&#8217;, 8080)<br />
	q = &#8220;ip=#{@env[&#8216;REMOTE_ADDR&#8217;]}&amp;apikey=#{apikey}&amp;alt=yaml&amp;mode=0&#8221;<br />
	resp, data = conn.get(&#8220;/yan/ticket?#{q}&#8221;)<br />
	@ticket = YAML::load(data)<br />
	haml :sinatra_captcha<br />
end</p>

<p>post &#8216;/&#8217; do<br />
	conn = Net::HTTP.new(&#8216;localhost&#8217;, 8080)<br />
	q = &#8220;ip=#{@env[&#8216;REMOTE_ADDR&#8217;]}&amp;apikey=#{apikey}&amp;key=#{params[&#8216;key&#8217;]}&amp;code=#{params[&#8216;captcha&#8217;]}&#8221;<br />
	resp, data = conn.get(&#8220;/yan/validate?#{q}&#8221;)<br />
	data<br />
end</p>

<p>use_in_file_templates!<br />
__END__</p>

<p>@@ sinatra_captcha<br />
%html<br />
	%head<br />
		%title Yan Captcha on Sinatra<br />
	%body<br />
		%form{:action=&gt;&#8221;/&#8221;, :method=&gt;&#8221;post&#8221;}<br />
			%p<br />
				Username:<br />
				%input{:name=&gt;&#8221;username&#8221;, :type=&gt;&#8221;text&#8221;}<br />
			%p<br />
				Password:<br />
				%input{:name=&gt;&#8221;password&#8221;, :type=&gt;&#8221;password&#8221;}<br />
			%p<br />
				Captcha:<br />
				%img{:src=&gt;@ticket[&#8216;url&#8217;]}<br />
				%br<br />
				%input{:name=&gt;&#8221;captcha&#8221;, :type=&gt;&#8221;text&#8221;}<br />
				%input{:name=&gt;&#8221;key&#8221;, :type=&gt;&#8221;hidden&#8221;, :value=&gt;@ticket[&#8216;key&#8217;]}<br />
				%input{:type=&gt;&#8217;submit&#8217;}

There are two parts of this application: ruby code and haml. I just use in-file-template for convenience. We define a get handler and a post handler on the path &#8216;/&#8217;. The get handler will request a ticket from Yan which contains captcha image url and ticket key. The post handler will extract user input and submit the Yan&#8217;s validator and return user the result. And the HAML code is template for page rendering after GET request.</p>

<p>Maybe you need to install sinatra and some dependency:
<em>sudo gem install sinatra haml</em></p>

<p>Run the code with a build-in WEBrick
<em>ruby sinatra-yan.rb</em></p>

<p>Browse to the default url, test it:</p>

<p><img class="alignnone" src="http://farm3.static.flickr.com/2766/4203612734_3237ed066c_o.png" alt="" width="459" height="268" /></p>

<p>For another similar tutorial using python, check Yan&#8217;s wiki page:
<a href="http://bitbucket.org/sunng/yan/wiki/SampleCode" target="_blank">http://bitbucket.org/sunng/yan/wiki/SampleCode</a></p>

<p>Thank you for your support. btw, today is my dear girl friend&#8217;s birthday, I just wish her happy everyday.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2009/12/20/yan-0-3/">Yan 0.3</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-12-20T00:00:00+08:00" pubdate data-updated="true">Dec 20<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>经过一周的重构和开发，我的开源项目，验证码服务，打上了0.3的tag，算是一个release吧。</p>

<p>This release has been focusing on support for different types captcha generators. Now Yan is not only able to provide image/jpeg captcha, but also text/plain and any others.
<h3>Changeset:</h3>
<ul>
	<li>Internal API Changes:
<ul>
	<li>Cache API improved: new CacheItemIdentity and CacheIdStrategy were introduced in to provide convertion between cache item name and captcha info model;</li>
	<li>Captcha Generator API improved: Add CaptchaGeneratorInfo to define some meta information on captcha providers (such as mode code, captcha type);</li>
	<li>Captcha Data Model(CaptchaInfo) and Ticket Data Model improved: configuration parameters are separated from required parameters and has been more generic for different types of generator algorisms;</li>
</ul>
</li>
	<li>External API Changes:
<ul>
	<li>Rename /image url to /captcha for better literal accuracy;</li>
	<li>/ticket now supports multiple types of applicable format (plain text / json / xml / yaml);</li>
	<li>/ticket now returns the mime type of the captcha generator;</li>
	<li>Add a Simple-Plain-Text generator as a sample for those whose mime type is other than image/jpeg;</li>
</ul>
</li>
	<li>Other changes:
<ul>
	<li>I created a new branch for next version of Yan. So the code in repository now has multiply branches, you can use &#8216;hg update branch-name&#8217; to switch between difference branches;</li>
	<li>The sample test page for the service (index.jsp) has been adopt to the new protocol and totally restyled.</li>
</ul>
</li>
</ul>
<img class="alignnone" src="http://farm3.static.flickr.com/2503/4200328968_b3dd1fee5f.jpg" alt="" width="500" height="391" /></p>

<p>Again, grab code from the development repository:
<em>hg clone https://sunng@bitbucket.org/sunng/yan/</em></p>

<p>If you don&#8217;t use mercurial/hg, you can also download the tagged version from the page:
<a href="http://bitbucket.org/sunng/yan/downloads/" target="_blank"><em>http://bitbucket.org/sunng/yan/downloads/</em></a></p>

<p>Just use maven to resolve dependency, build and run the project:
<em>mvn jetty:run</em></p>

<p>Feel free to report issue :)</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2009/12/09/a-button-by-gimp/">A Button by GIMP</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-12-09T00:00:00+08:00" pubdate data-updated="true">Dec 9<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Inspired by a <a href="http://sixrevisions.com/tutorials/web-development-tutorials/create-an-animated-call-to-action-button/" target="_blank">&#8220;Call to action&#8221; tutorial of Photoshop</a>, I&#8217;d like to do the same thing with free and open source software, GIMP.</p>

<p>Before we start the journey, it&#8217;s better to get well prepared. Take a look at the powerful plugin &#8221;<a href="http://registry.gimp.org/node/186" target="_blank">Layer Effects</a>&#8221;. It provides you complete functionality as &#8220;Layer Style&#8221; in Photoshop does which is of critical importance in such kind of image manipulation. Follow the installation guide and I won&#8217;t spend many words about this step.</p>

<p>Open your gimp, create a new canvas with custom size (which makes you feel comfortable)</p>

<p>New a layer, use selection tool to create a rounded rectangle selection area.</p>

<p><img class="alignnone" src="http://farm3.static.flickr.com/2744/4171189572_a6c70c8b00.jpg" alt="" width="500" height="375" /></p>

<p>Fill the selection with gradient color.</p>

<p><img class="alignnone" src="http://farm3.static.flickr.com/2653/4170430801_ee9b8e973d.jpg" alt="" width="500" height="375" /></p>

<p>Resize the canvas. Glow the selection with 3px by menu command &#8220;selection-&gt;glow&#8221;. The crop the canvas by selection using &#8220;image-&gt;crop by selection&#8221;.</p>

<p>Then we apply some layer effects to beauty the button.
<ul>
	<li>layer effects: inner glow, white 75% opacity, size 5</li>
	<li>layer effects: stroke 1px</li>
</ul>
<img src="http://farm3.static.flickr.com/2592/4171189712_2b48af7d78.jpg" alt="" width="500" height="375" /></p>

<p>Place some text on the button such as &#8220;Sign Up&#8221;. Bold sans font(DejaVu sans or Helvetica bold) is recommended here.</p>

<p>Use gradient overlay effect on the text. As the layer effects plugin doesn&#8217;t support gradient overlay on text, we have to do it in a different way. First, create a new layer. Then convert text to selection with context menu command. Gradient fill the selection and hide the original text layer at last. Now we got:</p>

<p><img class="alignnone" src="http://farm3.static.flickr.com/2692/4170430973_8f65b08603.jpg" alt="" width="500" height="375" /></p>

<p>Don&#8217;t stop here. Add layer effects on the new layer:
<ul>
	<li>inner shadow, black, size 2px, distance 2px, angle 90</li>
	<li>drop shadow, light, size 2px, distance 2px, angle 90</li>
</ul>
<img class="alignnone" src="http://farm3.static.flickr.com/2579/4170431039_4eff9b67ff.jpg" alt="" width="500" height="375" /></p>

<p>You can tune the color schema by yourself along the process :)</p>

<p><img class="alignnone" src="http://farm3.static.flickr.com/2765/4171189918_f1ea2c2eff_o.png" alt="" width="170" height="71" /></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2009/12/06/tikhonov/">Tikhonov</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-12-06T00:00:00+08:00" pubdate data-updated="true">Dec 6<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>2009年12月4日，苏联功勋演员吉洪诺夫去逝，享年81岁。</p>

<p><img class="alignnone" src="http://farm3.static.flickr.com/2488/4162200310_943fc8b4c3.jpg" alt="" width="500" height="492" /></p>

<p>吉洪诺夫是《春天的十七个瞬间》里施季里茨的扮演者，春天的十七个瞬间是一部70年代的间谍片，或者说电视剧也行，它有12集。吉洪诺夫扮演的是一个非常牛逼的角色，具体有多牛逼，我也不用自己孱弱的表达能力去描述了，如果有一天大家有机会有耐心看完，多少也能够了解。</p>

<p>第一次看《春天的十七个瞬间》是在缤纷多彩的高三暑假，2005年夏天。中央八套每晚十点左右，一天两集，我印象中当时并没有播完，尤其是到了最后变成了缩减版，结尾都没有播全。那是为数不多的我和我妈都能感兴趣的事物，因为播的时间比较晚，通常是第二天我妈来向我了解剧情。现在想起来，这是一段非常值得回忆的时光。</p>

<p>直到现在我还是很容易被老电影里的英雄人物吸引、单纯地敬仰。施季里茨送走普列什聂耳回柏林的路上，在车里睡了十五分钟。旁白大约说道，多年紧张的特工工作使他睡眠的时间可以自己掌握。这个情节印象非常深刻，以至于不断地想起来不断地试图模仿。</p>

<p>那时还没有视频网站，为了能够看全，后来还买了DVD，是我仅有的一套DVD。从头到尾看过三四遍，还在宿舍里和同学一起看过。情节挺慢，能静下来一点一点享受完的机会不多。再，看完这么一部十二集的长片，时间成本上实在不小。不过这不影响我印象深刻，不影响每天上班路上哼电影里的插曲，不影响一个形象留给人的东西。</p>

<p>其实能看到的吉洪诺夫演的电影不多，《春天》和《战争与和平》是其中最有名的，后者可惜我还没有看过。到了苏联解体以后，吉洪诺夫还在米亥科夫的《烈日灼人》里扮演了一个角色。这部电影我看过，但是吉洪诺夫的角色是今天上午才知道，看电影的时候完全没有发觉，因为像“施季里茨也会变老”这样的事实实在是很容易被忽略。</p>

<p>想到这里，我大概不用再写了，因为对于我这样的观众来说，其实吉洪诺夫还有施季里茨们一直都在我们身边。即使走了，也走不远。所以我把标题里的“别了”删掉，祝他们一切都好。
</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/blog/2009/12/06/tikhonov/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2009/11/29/adding-ubuntu-gis-repository/">Adding Ubuntu-GIS Repository</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-11-29T00:00:00+08:00" pubdate data-updated="true">Nov 29<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>在Ubuntu上安装GIS软件，可以添加这个PPA源：<em>
deb http://ppa.launchpad.net/ubuntugis/ubuntugis-unstable/ubuntu karmic main</em></p>

<p>导入GPG KEY
<em>gpg &#8211;keyserver subkeys.pgp.net &#8211;recv 089EBE08314DF160<br />
gpg &#8211;export &#8211;armor 089EBE08314DF160 | sudo apt-key add -</em></p>

<p>这个源中目前包含了最新版本的GIS软件：
<ul>
	<li>gdal 1.6</li>
	<li>grass</li>
	<li>qgis</li>
</ul></p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/blog/page/30/">&larr; Older</a>
    
    <a href="/blog/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/blog/page/28/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/blog/2014/03/04/slacker-0-dot-11-released/">Slacker Library Updated</a>
      </li>
    
      <li class="post">
        <a href="/blog/blog/2013/10/22/swapping-harddisk-without-pain/">Archlinux 梧桐更换硬盘</a>
      </li>
    
      <li class="post">
        <a href="/blog/blog/2013/10/08/delicious-released/">Delicious 发布</a>
      </li>
    
      <li class="post">
        <a href="/blog/blog/2013/07/16/four-years-as-programmer/">工作四周年</a>
      </li>
    
      <li class="post">
        <a href="/blog/blog/2013/07/05/grunt-for-requirejs-projects/">Grunt for Requirejs Projects</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/sunng87">@sunng87</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'sunng87',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/blog/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>On Delicious</h1>
  <div id="delicious"></div>
  <script type="text/javascript" src="http://feeds.delicious.com/v2/json/classicing?count=3&amp;sort=date&amp;callback=renderDeliciousLinks"></script>
  <p><a href="http://delicious.com/classicing">My Delicious Bookmarks &raquo;</a></p>
</section>




  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Sun Ning -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'sunng-blog';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
