
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>车水马龙</title>
  <meta name="author" content="Sun Ning">

  
  <meta name="description" content="I found fantasdic a great powerful dictionary tool with friendly UI and supports multiply sources. Unfortunately, this project seems to be no longer &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://sunng87.github.io/blog//blog/page/27">
  <link href="/blog/favicon.png" rel="icon">
  <link href="/blog/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="车水马龙" type="application/atom+xml">
  <script src="/blog/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/blog/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/blog/">车水马龙</a></h1>
  
    <h2>here comes the sun</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:sunng87.github.io/blog/" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/blog/">Blog</a></li>
  <li><a href="/blog/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2010/02/02/patch-for-fantadic-google-source/">Patch for Fantasdic Google Source</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-02-02T00:00:00+08:00" pubdate data-updated="true">Feb 2<span>nd</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I found fantasdic a great powerful dictionary tool with friendly UI and supports multiply sources. Unfortunately, this project seems to be no longer maintained. The latest version is 1.0-beta7.
<a title="fantasdic-google by 贝小塔, on Flickr" href="http://www.flickr.com/photos/40741608@N08/4324570353/"><img src="http://farm5.static.flickr.com/4049/4324570353_c1f79ac6dc.jpg" alt="fantasdic-google" width="500" height="362" /></a></p>

<p>The google translate source was created in 2007. As the google translate service page changed, this module doesn&#8217;t work any more, so I just picked up my vim then created this patch for those still want to use it.</p>

<p>This patch has dependency with ruby&#8217;s json module, so before you apply it, run:
<em>sudo gem install json</em>
or
<em>sudo apt-get install libjson-ruby1.8</em></p>

<p>Download the patch at:
<a href="https://bugzilla.gnome.org/attachment.cgi?id=152835">https://bugzilla.gnome.org/attachment.cgi?id=152835</a></p>

<p>Patch it (Ubuntu installation as example):
<em>cd /usr/lib/ruby/1.8/fantasdic/sources/<br />
sudo patch google_translate.rb /home/sun/google_translate.rb.diff</em></p>

<p>Restart fantasdic, then your get it works! And this bug is tracked at:
<a href="https://bugzilla.gnome.org/show_bug.cgi?id=605641">https://bugzilla.gnome.org/show_bug.cgi?id=605641</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2010/01/31/%E7%BF%BB%E8%AF%91po/">翻译po</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-01-31T00:00:00+08:00" pubdate data-updated="true">Jan 31<span>st</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>翻译一个po文件。确认安装了gettext工具包。</p>

<p>cd到po目录，创建pot
<em>intltool-update &#8211;pot</em></p>

<p>创建相应的语言文件，例如zh_CN
<em>msginit -l zh_CN.utf8</em></p>

<p>程序会提示选择或输入邮箱，之后就会生成zh_CN.po文件，打开文件，逐条编辑msgstr即可。</p>

<p>手动编辑LINGUAS文件，按顺序将zh_CN添加到其中。</p>

<p>可以通过这个命令查看翻译的进度
<em>msgfmt -cv zh_CN.po</em></p>

<p>对于更新pot更新的情况，可以使用命令更新po文件
<em>intltool-update zh_CN</em></p>

<p>参考：
<ul>
	<li><a href="http://live.gnome.org/TranslationProject/LocalisationGuidezh">http://live.gnome.org/TranslationProject/LocalisationGuidezh</a></li>
	<li><a href="http://blog.chinaunix.net/u1/37261/showart_476642.html">http://blog.chinaunix.net/u1/37261/showart_476642.html</a></li>
</ul></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2010/01/30/emerillon-map-viewer-for-gnome-desktop/">Emerillon: Map Viewer for Gnome Desktop</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-01-30T00:00:00+08:00" pubdate data-updated="true">Jan 30<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>自从libchamplain / geoclue等库发布之后，gnome桌面的地理信息工具和支持发展很迅速：例如之前提到过的eye-of-gnome的地理信息插件，根据EXIF信息在地图上显示。现在gnome桌面上终于有一个专门的地图查看器了，仍然是基于libchamplain，名字叫做<a href="http://www.novopia.com/emerillon/" target="_blank">emerillon</a></p>

<p><a title="Emerillon Map Viewer by 贝小塔, on Flickr" href="http://www.flickr.com/photos/40741608@N08/4315412541/"><img src="http://farm5.static.flickr.com/4021/4315412541_d34e08d02b.jpg" alt="Emerillon Map Viewer" width="500" height="286" /></a></p>

<p>仍然是使用open street maps，这两年上海的地图发展的非常不错，连最新的二号线东延都已经被标注出来了。相比之下，南京的地图就还是一片空白。</p>

<p>在Ubuntu上安装emerillon，可以从其网站上下载源码编译安装：
<a href="http://www.novopia.com/emerillon/download.html">http://www.novopia.com/emerillon/download.html</a></p>

<p>emerillon的几个主要依赖：
<ul>
	<li>libchamplain</li>
	<li>librest</li>
	<li>ethos</li>
</ul>
libchamplain在ubuntu 9.10的仓库已经包含</p>

<p>librest也在软件仓库中，不过需要注意的是ubuntu将librest安装在pkg-config里时的名字叫做rest.pc，而emerillon查找的是rest-0.6.pc，所以需要手动建立一个软连接：
<em>sudo ln -s /usr/lib/pkgconfig/rest.pc /usr/lib/pkgconfig/rest-0.6.pc</em></p>

<p>ethos是一个Gtk的插件框架，目前还不在软件仓库中，需要从网站下载代码编译：
<a href="http://git.dronelabs.com/ethos/" target="_blank">http://git.dronelabs.com/ethos/</a>
ethos网站上提到的PPA源中的版本偏旧，不建议使用。</p>

<p><em>实际上也可以直接添加emerillon的PPA源：<br />
deb http://ppa.launchpad.net/mathieu-tl/emerillon/ubuntu karmic main<br />
deb-src http://ppa.launchpad.net/mathieu-tl/emerillon/ubuntu karmic main</em></p>

<p>另外，也可以通过Ubuntu Tweak安装。</p>

<p>作者Blog：
<a href="http://blog.pierlux.com/en/">http://blog.pierlux.com/en/</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2010/01/28/all-new-sunng-info/">All New SUNNG.INFO</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-01-28T00:00:00+08:00" pubdate data-updated="true">Jan 28<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>今早短路，在godaddy上注册了我的新域名sunng.info。更换域名主要出于几方面的考虑：
<ol>
	<li>新域名1年的注册费用相当于原先的一半；</li>
	<li>众所周知的原因，域名放在国内存在一定的风险；</li>
	<li>原先域名过长不方便记忆和交流；</li>
	<li>.com后缀和我一穷二白地状况不符</li>
	<li>classicning.com曾被加入stopbadware.org，至今没有从twitter的malcious数据库里移除</li>
</ol>
原先的classicning.com会在今年6月到期，如果没有意外情况我不准备续费了，届时这个使用了四年的域名就要废弃了（当时客服大嫂还在电话里娇嗔地问我为啥不续十年呢，你说为啥呢）。</p>

<p>麻烦大家利用这半年的时间逐步改变习惯，逐步用sunng.info了。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2010/01/27/new-composite-based-captcha-image/">New Composite Based Captcha Image</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-01-27T00:00:00+08:00" pubdate data-updated="true">Jan 27<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>recaptcha的验证码新增了alpha composite的新机制取代干扰线，今天用了一些时间在<a href="http://bitbucket.org/sunng/yan/" target="_blank">YAN</a>上也实现了这种绘图机制。</p>

<p><a title="30a2512d899641a8ab79a7c86946ff71 by 贝小塔, on Flickr" href="http://www.flickr.com/photos/40741608@N08/4308533479/"><img src="http://farm3.static.flickr.com/2752/4308533479_42337f4525_o.png" alt="30a2512d899641a8ab79a7c86946ff71" width="300" height="100" /></a>
<a title="f03ec596b91b4ce985c5b5af4a79e961 by 贝小塔, on Flickr" href="http://www.flickr.com/photos/40741608@N08/4308533483/"><img src="http://farm5.static.flickr.com/4068/4308533483_a9e687b74c_o.png" alt="f03ec596b91b4ce985c5b5af4a79e961" width="300" height="100" /></a></p>

<p>使用Java2D的AlphaComposite实现，选用的Rule为alpha 1.0的SrcOut，即通过公式</p>

<p>Ar = As * (1 – Ad )<br />
Cr = Cs * (1 – Ad )<br />
用语言描述就是叠加区域的透明度为0. 使用这种机制必须采用BufferedImage.TYPE_INT_ARGB的图像，并且输出支持alpha通道的格式。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2010/01/19/%E8%BF%91%E5%86%B5/">近况</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-01-19T00:00:00+08:00" pubdate data-updated="true">Jan 19<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><ol>
	<li>这是经历了又一次长时间的unavailable回来。</li>
	<li>最近挺忙，新项目启动了，旧项目月底要上线，早先的项目deadline也要到了，还不见动静不知道什么情况，今天又被叫去说数据部门的老大又有新想法了，娘勒，四个，四个啊。</li>
	<li>即使有四个，我发现我在twitter上还是那么神情自若，rabr自动取新消息的功能太害人了，忍不住就想点点看看，看了就想点，很影响注意力的集中。于是最近改用lynx / w3m这样的命令行浏览器上rabr。rabr做的还真是非常不错，在没有Javascript支持的情况下依然能用。诚心推荐大家一起来复古，w3m很powerful，支持vim和lynx的快捷键切换，居然还能显示图片，当时我就shock了。</li>
	<li>YAN有了200次commit，接下来的主要工作是把它拆成多个maven module，以便未来开发的方便。尽管之前做了一些准备了，但是这个过程预计不会太轻松。最近精力有限，暂时先不全砸在上面吧。</li>
	<li>业余的项目还要做下去，分为multimodule之后YAN的开发也就差不多了；之前写的Exaile的豆瓣Cover插件也没有后续开发的必要了，大家有什么点子欢迎分享。</li>
	<li>上周去上图发现楼上的阅览室资源很多，我决定以后每个月至少花一天泡在图书馆。</li>
	<li>有时候想想我真凄凉啊，哎</li>
</ol></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2010/01/10/which-university/">Which University</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-01-10T00:00:00+08:00" pubdate data-updated="true">Jan 10<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>这年头怪事真叫多。今天在珠江路地铁站，突然过来一位深度大叔，弱弱地问我这个方向是不是去火车站，我说这大叔也真不容易，牌子都不认识怎么进来的，赶紧说是的。<br />
大叔继续问你也去火车站吗，我想这大叔估计第一次来，人生地不熟的，也说是。<br />
这就罢了吧，您跟着我就行了。但是大叔不罢休，继续，“你是学生吗”。我本能地把手装进口袋握住钱包，说了一个我平生最凄凉的谎话，是的。以为会话到此结束的朋友你们错了，大叔继续不依不饶，问你是哪个学校的啊，我刚要如实撒谎，大叔蹦出一句which university（请相信我的听力，我的听力和大叔的口语水平还是相当的），这句没让我当场摔倒完全是多亏中午吃得多有劲。<br />
奇妙的对话从他娘的which university开始了，大叔滔滔不绝<br />
“英语怎么样？四级过了吗？”<br />
“你是学什么专业的？which major？”<br />
“What about your speaking English？口语怎么样啊？”<br />
“你知道向日葵怎么说吗？桑福拉沃”<br />
“月季呢？”<br />
“肉丝你知道吧？玫瑰。加上中国，China rose就是月季”<br />
（地铁来了，我不堪忍受，从旁边的门进去，大叔跟过来继续）<br />
&#8220;toilet你知道吧？toilet water你猜是什么？&#8221;<br />
这个时候终于有个座位，大叔当然不让坐下，还不忘循循善诱，“是花露水”。</p>

<p>好在这课也上到花露水为止。临下车摸了一下手机和钱包，嗯，这课是免费试听的，也罢也罢。原来我长得这么像是有英语培训市场价值的啊。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2010/01/04/oauth-step-by-step/">OAuth Step by Step</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-01-04T00:00:00+08:00" pubdate data-updated="true">Jan 4<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>最近琢磨OAuth认证方式。OAuth的优点主要在于﻿
<ul>
	<li>用户不需要直接提供用户名密码给第三方应用，就可以让第三方应用访问受限资源；</li>
	<li>资源提供方对第三方应用有更细粒度的控制。</li>
</ul>
在整个OAuth协议里，生成signature的base string是最容易出错的部分。它由HTTP方法名、URL编码的请求路径和请求的参数表组成。<br />
请求的参数表是除去oauth_signature以外的所有参数，按参数名排序，并进行url转义
<pre class="brush:python">def to_signature_key(method, url, data):
	keys = list(data.keys())
	keys.sort()
	encoded = urllib.quote("&amp;".join([key+"="+data[key] for key in keys]))
	return "&amp;".join([method, urllib.quote(url, safe="~"), encoded])
</pre>
有了这个通用的生成signature base string的方法，以后就可以根据OAuth协议规范按步骤进行。</p>

<p>首先获取Request Token。这一步通常使用资源提供方注册的API Key和API Key Secret
<pre class="brush:python">def request_token_params(consumer_key, consumer_secret, path, method='GET'):
	data={}
	data['oauth_consumer_key']=consumer_key
	data['oauth_signature_method']='HMAC-SHA1'
	data['oauth_timestamp']=str(int(time.time()))
	data['oauth_nonce']=''.join([str(random.randint(0,9)) for i in range(10)])
	print data</pre></p>

<p>	msg = to_signature_key(method, path, data)<br />
	print msg</p>

<p>	signed = base64.b64encode(hmac.new(consumer_secret+&#8221;&amp;&#8221;, msg, hashlib.sha1).digest())<br />
	print signed<br />
	data[&#8216;oauth_signature&#8217;]=signed<br />
	return data</p>

<p>def result2dict(result_string):<br />
	d = {}<br />
	params = res.split(&#8216;&amp;&#8217;)<br />
	for p in params:<br />
		d[p.split(&#8216;=&#8217;)[0]] = p.split(&#8216;=&#8217;)[1]<br />
	return d</p>

<p>conn = httplib.HTTPConnection(&#8220;www.douban.com&#8221;, 80)</p>

<p>params = request_token_params(consumer_key, consumer_secret, request_token_path)<br />
conn.request(&#8216;GET&#8217;, request_token_path+&#8221;?&#8221;+urllib.urlencode(params))<br />
res = conn.getresponse().read()<br />
print res<br />
request_token = result2dict(res)

这一步可以获得未经认证的Request Token和Request Token Secret。需要注意的细节是在计算hmac签名的时候，即使只有一个Token Secret，仍然需要加上&#8221;&amp;&#8221;</p>

<p>第二步要求用户授权该Request Token，打开浏览器，将用户定向到相应的授权页面，参数为上一步获得的Request Token</p>

<p>第三步，用授权过的Request Token换取Access Token。这一步类似第一步，只是用于签名的token包括API Key Secret和Request Token
<pre class="brush:python">def access_token_params(consumer_key, consumer_secret, oauth_token, oauth_secret, path, method='GET'):
	data={}
	data['oauth_consumer_key']=consumer_key
	data['oauth_signature_method']='HMAC-SHA1'
	data['oauth_timestamp']=str(int(time.time()))
	data['oauth_nonce']=''.join([str(random.randint(0,9)) for i in range(10)])
	data['oauth_token'] = oauth_token</pre></p>

<p>	msg = to_signature_key(method, path, data)<br />
	print msg</p>

<p>	signed = base64.b64encode(hmac.new(consumer_secret+&#8221;&amp;&#8221;+oauth_secret, msg, hashlib.sha1).digest())<br />
	print signed<br />
	data[&#8216;oauth_signature&#8217;]=signed<br />
	return data</p>

<p>params = access_token_params(consumer_key, consumer_secret, request_token[&#8216;oauth_token&#8217;],<br />
	request_token[&#8216;oauth_token_secret&#8217;], access_token_path)<br />
conn.request(&#8216;GET&#8217;, access_token_path+&#8221;?&#8221;+urllib.urlencode(params))<br />
res = conn.getresponse().read()<br />
print res<br />
access_token = result2dict(res)

这一步将至少返回Access Token和Access Token Secret，是最终用于访问受限资源的Token。以豆瓣的实现为例，OAuth的相关参数应放在HTTP头里随请求进行发送。
<pre class="brush:python">def oauth_header(consumer_key, consumer_secret, oauth_token, oauth_secret, path, realm):
	data = access_token_params(consumer_key, consumer_secret, oauth_token, oauth_secret, path, method="POST")
	header_string = ','.join([key+'="'+data[key]+'"' for key in data.keys()])
	return 'OAuth realm="'+realm+'",'+header_string</pre></p>

<p>posturl = &#8216;http://api.douban.com/miniblog/saying&#8217;</p>

<p>content = &#8220;&#8221;&#8220;&lt;?xml version=&#8217;1.0&#8217; encoding=&#8217;UTF-8&#8217;?&gt;<br />
&lt;entry xmlns:ns0=&#8221;http://www.w3.org/2005/Atom&#8221; xmlns:db=&#8221;http://www.douban.com/xmlns/&#8221;&gt;<br />
&lt;content&gt;li lei ju le han mei mei&lt;/content&gt;<br />
&lt;/entry&gt;<br />
&#8221;&#8221;&#8221;</p>

<p>header = {}<br />
header[&#8216;Authorization&#8217;] = oauth_header(consumer_key, consumer_secret,<br />
		access_token[&#8216;oauth_token&#8217;], access_token[&#8216;oauth_token_secret&#8217;],<br />
		posturl, &#8220;http://api.douban.com&#8221;)<br />
header[&#8216;Content-Type&#8217;] = &#8216;application/atom+xml&#8217;<br />
print header</p>

<p>conn.request(&#8216;POST&#8217;, posturl, content, header)<br />
res = conn.getresponse().read()</p>

<p>print res</p>

<p>conn.close()

在这一步中，用于生成signature base string的url是要访问的受限资源地址，而签名的参数表依然是oauth相关的参数。<br />
生成的Authorization头如下
<pre class="brush:text">Authorization: OAuth realm="http://api.douban.com",
    oauth_nonce="8735717688",
    oauth_timestamp="1262613619",
    oauth_consumer_key="0bc081a01168b263234184e0343a1729",
    oauth_signature_method="HMAC-SHA1",
    oauth_token="5fb836c37543ad691f28a44a5fcb083b",
    oauth_signature="jk6p5qaXVPrGQctSzpO5jjYHfDk="
</pre>
用这个头就可以在一定的时间内访问所有授权范围内的受限资源。</p>

<p>代码是ugly了一些，不过应该相对易于理解吧。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2010/01/01/happy-new-year-with-yan-0-4/">Happy New Year With Yan 0.4</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-01-01T00:00:00+08:00" pubdate data-updated="true">Jan 1<span>st</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I am glad to release the Yan 0.4 at the last night of 2009. It&#8217;s an important release which witnesses the improvement on both code and the project itself. We have great changes in all modules.  Packages have been rearranged and renamed to be more comprehensible. Let&#8217;s dive into the changeset:
<h3>Changeset</h3>
<ul>
	<li>ApiKey database derby / h2 support, still use hsql as default because it&#8217;s fastest (#9)</li>
	<li>Captcha provider classes now loaded dynamically on runtime. They are not managed by guice container any longer. (#15)</li>
	<li>The useless cache module was completely removed (#10)</li>
	<li>ApiKey CR<span style="text-decoration: line-through;">U</span>D UI has been replaced by RESTful GET/PUT/DELETE interfaces</li>
	<li>For text-based captcha, just return the question in ticket, no need for (also impossible to)  retrieve it from browser (#8)</li>
	<li>Resource has been separated from the project file (#14 #18)</li>
	<li>Add test to make sure the /ticket and /validate request are sent by the same application (#17)</li>
	<li>Standardized error output: use HTTP error for client(browser), a selected error object for application (#24 #26)</li>
	<li>/captcha/ request (invoked by client directly) now accepts configuration parameters</li>
	<li>ApiKey is now binded to specified domain, it will check the /captcha request&#8217;s referer (#27)</li>
	<li>NEW captcha provider introduced in: Tiled Image Captcha (#12)</li>
	<li>JMX monitoring support on EhCache (#33)</li>
	<li>a great deal of code improvements and bug-fixes</li>
</ul>
<h3>Interface changes</h3>
The object return by /ticket has its attribute &#8220;url&#8221; renamed to &#8220;data&#8221;.
<h3>Screenshots</h3>
Use visualvm or jconsole the monitor ehcache status and statistics (enabled in 0.4 by default):</p>

<p><img class="alignnone" src="http://farm5.static.flickr.com/4034/4231348850_db1b877ba8.jpg" alt="" width="500" height="313" /></p>

<p>The new captcha provider in ruby and python sample application (<a href="http://bitbucket.org/sunng/yan/wiki/SampleCode" target="_blank">Sample Code</a>):</p>

<p><img class="alignnone" src="http://farm3.static.flickr.com/2645/4230582459_bf63ce6677.jpg" alt="" width="500" height="313" />
<h3>Download &amp; Deploy</h3>
Since 0.4, yan package are available for download directly. Please refer to the  <a href="http://bitbucket.org/sunng/yan/downloads/" target="_blank">download page</a>, grab both yan-0.4.war and yan-resource.tar.bz2. Just throw the war package to your servlet container.  Then extract the resource package to your disk. Don&#8217;t forget to set the environment variable:
<em>export YAN_RESOURCE=/path/to/your/resource</em></p>

<p>Start the servlet container in the same context, browser <em>http://localhost:8080/yan-0.4/</em> to see the test page and emulate the captcha process.
<h3>Retrieve the code</h3>
Clone the mercurial repository from bitbucket.org</p>

<p><em>$ hg clone https://sunng@bitbucket.org/sunng/yan/</em></p>

<p>You will get a copy of whole code repository (because mercurial is a distributed version control system). You are on the default branch at the beginning. The default branch maintains the code of 0.4, if you want to see latest things on Yan, switch to the development branch by</p>

<p><em>$ hg update 0.5-dev</em></p>

<p>Yan 0.5 is already on the way.
<h3>Reporting Issue</h3>
Issue reporting and patch submitting are always welcomed. Check the <a href="http://bitbucket.org/sunng/yan/issues/" target="_blank">issue tracker on bitbucket</a>, you will find <a href="http://bitbucket.org/sunng/yan/issues/?kind=proposal&amp;version=0.5" target="_blank">new features</a> in 0.5</p>

<p>Thanks for your support and <img class="alignnone" src="http://farm5.static.flickr.com/4030/4231554900_935d453250_o.png" alt="" width="250" height="40" />!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/blog/2009/12/31/uncle-wang-%E4%BB%96%E5%8E%BB%E5%B9%B4%E9%80%80%E4%BA%86%E4%BC%91/">Uncle Wang 他去年退了休</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-12-31T00:00:00+08:00" pubdate data-updated="true">Dec 31<span>st</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>好久没有用这么不着边际的标题了，其实这种做法是我的偏好。你要是觉着它顺口的话它确确实实是一句歌词，WG的<a href="http://blog.williamgates.biz/2009/11/li-lei-han-mei-mei-2/" target="_blank">这篇文章</a>不推荐实在太可惜了。</p>

<p>这本来应该是一篇2009年的总结来着，早上上班的路上我一直在过滤哪些要说哪些值得说哪些能说。不用我说，认识我的人都知道我今年可说的事情太多了。鉴于太多太碎，就不一件一件地说了。另一方面，也正好是过去的已经远去，开始的才刚刚开始，不是作总结的时候。这个年关是客观上的一个坎，于个人的生活和进度，他还不是什么milestone，远不及9号要交房租的重要。</p>

<p>紧接着是老生常谈感叹时光的话，<a href="http://lightory.net/" target="_blank">Lightory</a>在twitter上说的这句我很有共鸣——“马上 2010 年了，总觉得这个数字没现实感，是只属于科幻小说里的年代。” 分明是快要到了何勇唱的“宇宙飞船没找到天堂”的时候了。不过前几天鲜果联播上看到有人发的一句话很好地解释了日子越过越快的原因：“对于一个10岁的人来说，每长一岁，意味着他复制新增了自己十分之一；而对一个30岁的人来说，每长一岁，意味着他只复制新增了自己过往经历的三十分之一”。他明白了，你呢？</p>

<p>说总结就要定计划（说这句话的时候我猛然想起这周项目周报又忘填了），不过<a href="http://timyang.net/" target="_blank">Tim</a>大牛半开玩笑地说，计划定得越多，洋相出得越大。需求变化那么快，闹不好项目中途都被cut了，所以细节上还是短周期迭代。大局上，还是给自己一直以来的要求，不要随波逐流，注意自己的言行，努力学习技术，认真工作积累经验。</p>

<p>今天晚上找一找Yan的bug，没有什么问题的话，0.4的tag就可以打了。</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/blog/page/28/">&larr; Older</a>
    
    <a href="/blog/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/blog/page/26/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/blog/2013/07/05/grunt-for-requirejs-projects/">Grunt for Requirejs Projects</a>
      </li>
    
      <li class="post">
        <a href="/blog/blog/2013/06/29/%E7%BB%99-raspberry-pi-%E6%B7%BB%E5%8A%A0%E4%B8%80%E4%B8%AA%E6%98%BE%E7%A4%BA-ip-%E7%9A%84%E6%B6%B2%E6%99%B6%E5%B1%8F/">给 Raspberry Pi 添加一个显示 IP 的液晶屏</a>
      </li>
    
      <li class="post">
        <a href="/blog/blog/2013/06/07/%E7%BA%B8%E4%B8%8A%E5%BE%97%E6%9D%A5%E7%BB%88%E8%A7%89%E6%B5%85/">纸上得来终觉浅</a>
      </li>
    
      <li class="post">
        <a href="/blog/blog/2013/04/24/checkout-ring-adapter-for-jetty-9/">Checkout Ring Adapter for Jetty 9</a>
      </li>
    
      <li class="post">
        <a href="/blog/blog/2013/04/12/ann-handlebars-clojure-api/">[ANN] Handlebars Clojure API</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/sunng87">@sunng87</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'sunng87',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/blog/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>On Delicious</h1>
  <div id="delicious"></div>
  <script type="text/javascript" src="http://feeds.delicious.com/v2/json/classicing?count=3&amp;sort=date&amp;callback=renderDeliciousLinks"></script>
  <p><a href="http://delicious.com/classicing">My Delicious Bookmarks &raquo;</a></p>
</section>




  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Sun Ning -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'sunng-blog';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
